{
    "message": "Redirect",
    "uri": "order_info_component.html",
    "orders_data": {
        "21": {
            "order": {
                "customer_id": 1,
                "regdate": "2023-11-23",
                "despdate": "2023-11-30",
                "note": "hello world!",
                "data_id": 1,
                "actual_desp_date": "2023-11-30",
                "id": 21,
                "status": "Dispatched",
                "order_type": 0,
                "active_date": "2023-11-23",
                "deliverybatches": [
                    {
                        "id": 29,
                        "despdate": "2024-06-04",
                        "status": "STORE",
                        "invoice_id": 197,
                        "order_id": 21,
                        "batch_name": "sarth",
                        "actual_desp_date": "2024-06-06",
                        "data_id": 1,
                        "orderitemdispatch": [
                            {
                                "id": 63,
                                "dispatch_qty": 0.0,
                                "inventory_ledger_id": null,
                                "delivery_batch_id": 29,
                                "order_item_id": 19,
                                "data_id": 1
                            },
                            {
                                "id": 64,
                                "dispatch_qty": 0.0,
                                "inventory_ledger_id": null,
                                "delivery_batch_id": 29,
                                "order_item_id": 20,
                                "data_id": 1
                            },
                            {
                                "id": 65,
                                "dispatch_qty": 0.0,
                                "inventory_ledger_id": null,
                                "delivery_batch_id": 29,
                                "order_item_id": 47,
                                "data_id": 1
                            }
                        ]
                    },
                    {
                        "id": 17,
                        "despdate": "2023-11-30",
                        "status": "DISPATCHED",
                        "invoice_id": null,
                        "order_id": 21,
                        "batch_name": "auto_batch",
                        "actual_desp_date": "2024-06-06",
                        "data_id": 1,
                        "orderitemdispatch": [
                            {
                                "id": 36,
                                "dispatch_qty": 11.0,
                                "inventory_ledger_id": null,
                                "delivery_batch_id": 17,
                                "order_item_id": 19,
                                "data_id": 1
                            },
                            {
                                "id": 37,
                                "dispatch_qty": 15.0,
                                "inventory_ledger_id": null,
                                "delivery_batch_id": 17,
                                "order_item_id": 20,
                                "data_id": 1
                            },
                            {
                                "id": 38,
                                "dispatch_qty": 0.0,
                                "inventory_ledger_id": null,
                                "delivery_batch_id": 17,
                                "order_item_id": 47,
                                "data_id": 1
                            }
                        ]
                    }
                ],
                "invoices": [
                    {
                        "order_id": 21,
                        "data_id": 1,
                        "invoice_date": "2024-01-11",
                        "invoice_type": "intra-state",
                        "invoice_amount": 0.0,
                        "invoice_tax_amount": 0.0,
                        "id": 61,
                        "invoice_number": "SALES/11",
                        "invoice_html": "\n<html>\n\t<head>\n\t\t<meta charset=\"utf-8\">\n\t\t<title>SALES INVOICE</title>\n\t\t<link rel=\"stylesheet\" href=\"/static/invoices/invoice_style.css\">\n\t\t<link rel=\"license\" href=\"https://www.opensource.org/licenses/mit-license/\">\n\t\t<script src=\"/static/invoices/invoice_script.js\"></script>\n\t\t<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.2/jspdf.min.js\"></script>\n\t\t<script src=\n\"https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.js\">\n    </script>\n\n\t</head>\n\t<body id=\"pdf-content\">\n\t<script>\n    function convertUnit(itemId, quantityElementids, unitElement, rateElementids=[]) {\n        var url = '/units_relation_api?item_ids[]=' + itemId;\n\n        fetch(url)\n            .then(function(response) {\n                return response.json();\n            })\n            .then(function(data) {\n                var unitList = data[itemId];\n                var currentUnit = unitElement.textContent;\n\n                length_unitList = Object.keys(unitList).length;\n                // console.log(length_unitList);\n                if (length_unitList === 1) {\n                    // Handle the case when there is only one unit defined\n                    console.log('Only one unit is defined for this item.');\n                    return;\n                }\n\n                var currentConversionFactor = 1;\n\n                // Find the current unit's conversion factor\n                if (unitList[currentUnit]) {\n                    currentConversionFactor = parseFloat(unitList[currentUnit]);\n                }\n\n                // Find the index of the current unit\n                var currentIndex = -1;\n                for (var i = 0; i < length_unitList; i++) {\n                    if (Object.keys(unitList)[i] === currentUnit) {\n                        currentIndex = i;\n                        break;\n                    }\n                }\n\n                // Cycle to the next unit\n                var nextUnitIndex = (currentIndex + 1) % length_unitList;\n                var nextUnit = Object.keys(unitList)[nextUnitIndex];\n                var nextConversionFactor = parseFloat(unitList[nextUnit]);\n                // Update the UI\n                unitElement.textContent = nextUnit;\n                unitElement.value = nextUnit;\n                for(var i = 0; i <quantityElementids.length; i++){\n\n                    quantityElement = document.getElementById(quantityElementids[i]);\n                    // Update the quantity by multiplying with the conversion factor\n                    var currentQuantity = parseFloat(quantityElement.textContent);\n                    var currentQuantityValue = parseFloat(quantityElement.value);\n                    var newQuantity = currentQuantity * (nextConversionFactor / currentConversionFactor);\n                    var newQuantityValue = currentQuantityValue * (nextConversionFactor / currentConversionFactor);\n\n                    \n                    quantityElement.textContent = newQuantity.toFixed(3);\n                    quantityElement.value = newQuantityValue.toFixed(3);\n                    quantityElement.setAttribute(\"data-parent\", newQuantityValue.toFixed(2))\n                    quantityElement.setAttribute(\"data-child\", newQuantityValue.toFixed(2))\n                }\n                for(var i = 0; i <rateElementids.length; i++){\n\n                    quantityElement = document.getElementById(rateElementids[i]);\n                    // Update the quantity by multiplying with the conversion factor\n                    var currentQuantity = parseFloat(quantityElement.textContent);\n                    var currentQuantityValue = parseFloat(quantityElement.value);\n                    var newQuantity = currentQuantity / (nextConversionFactor / currentConversionFactor);\n                    var newQuantityValue = currentQuantityValue / (nextConversionFactor / currentConversionFactor);\n\n                    \n                    quantityElement.textContent = newQuantity.toFixed(3);\n                    quantityElement.value = newQuantityValue.toFixed(3);\n                    quantityElement.setAttribute(\"data-parent\", newQuantityValue.toFixed(2))\n                    quantityElement.setAttribute(\"data-child\", newQuantityValue.toFixed(2))\n                }\n            })\n            .catch(function(error) {\n                console.error('Error fetching unit conversion data:', error);\n            });\n    }\n\n</script>\n\t<form action=\"/save_invoice\" method=\"post\" id=\"save_invoice_form\">\n\t\t<input type=\"hidden\" name=\"invoice_id\" value=\"61\">\n\t\t<input type=\"hidden\" name=\"invoice_html\" id=\"invoice_html_input\" value=\"\">\n\t\t<input type=\"hidden\" name=\"invoice_number\" id=\"invoice_number_input\" value=\"\">\n\t    <div>\n\t\t    <button type=\"button\" onclick=\"saveInvoice()\">Save</button>    \t\n\t\t    <button type=\"button\" id=\"generate-pdf\" >Generate PDF</button>\n\t\t    <button type=\"button\" onclick=\"location.href='/invoices?order_id=21&action=generate&invoice_class=sales-invoice&invoice_file=sales_invoice'\">GENERATE NEW INVOICE</button>\n\t    </div>\n\t\t<header>\n\t\t\t<h1>SALES INVOICE</h1>\n\t\t\t<address contenteditable id=\"company_details\">\n\t\t\t\t<p style=\"font-weight: bold\">VEDANT AGRAWAL_J3VU4NZYT5</p>\n\t\t\t\t<p></p>\n\t\t\t\t<p><strong>GSTIN:</strong></p>\n\t\t\t</address>\n\t\t\t<span><img alt=\"\" src=\"\"><input type=\"file\" accept=\"image/*\"></span>\n\t\t\t<table class=\"meta\">\n\t\t\t\t<tr>\n\t\t\t\t\t<th><span contenteditable>Invoice #</span></th>\n\t\t\t\t\t<td><span contenteditable id=\"invoice_number\">SALES/11</span></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th><span contenteditable>Date</span></th>\n\t\t\t\t\t<td><span id=\"invoice_date\">2024-01-11</span></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th><span contenteditable>Amount Due</span></th>\n\t\t\t\t\t<td><span id=\"prefix\" contenteditable>Rs.</span><span id=\"\">600.00</span></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</header>\n\t\t<article>\n\t\t\t\n\t\t\t<div>\n\t\t\t\t<address contenteditable id=\"billing_details\">\n\t\t\t\t\t<span style=\"font-weight: bold\">BILL TO: RAQGEN SOLUTIONS PRIVATE LIMITED</span>\n\t\t\t\t\t<p style=\"white-space: pre-wrap;\">10 / 20 , fateh kunj, Vidhyadhar Nagar</p>\n\t\t\t\t\t<p>GSTIN: </p>\n\t\t\t\t</address>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<address contenteditable id=\"shipping_details\">\n\t\t\t\t\t<span style=\"font-weight: bold\">SHIP TO: RAQGEN SOLUTIONS PRIVATE LIMITED</span>\n\t\t\t\t\t<p style=\"white-space: pre-wrap;\">10 / 20 , fateh kunj, Vidhyadhar Nagar</p>\n\t\t\t\t\t<p>GSTIN: </p>\n\t\t\t\t</address>\n\t\t\t</div>\n\t\t</article>\n\t\t<article>\n\t\t\t<table class=\"inventory\">\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th><span contenteditable>Item</span></th>\n\t\t\t\t\t\t<th><span contenteditable>HSN/SAC</span></th>\n\t\t\t\t\t\t<th><span contenteditable>Quantity</span></th>\n\t\t\t\t\t\t<th><span contenteditable>Unit</span></th>\n\t\t\t\t\t\t<th><span contenteditable>Rate</span></th>\n\t\t\t\t\t\t<th><span contenteditable>Discount %</span></th>\n\t\t\t\t\t\t<th><span contenteditable>CGST</span></th>\n\t\t\t\t\t\t<th><span contenteditable>SGST</span></th>\n\t\t\t\t\t\t<th><span contenteditable>Amount</span></th>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t\t<!-- <a class=\"add\">+</a> -->\n\t\t\t<address contenteditable style=\"border-width: 0\" id=\"bank_details\">\n\t\t\t\t<p>Total in Words:</p>\n\t\t\t\t<p>Bank Acc. Details:</p>\n\n\t\t\t</address>\n\t\t\t<table class=\"balance\">\n\t\t\t\t<tr>\n\t\t\t\t\t<th><span contenteditable >Total</span></th>\n\t\t\t\t\t<td><span data-prefix>$</span><span id=\"total_amount\">600.00</span></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th><span contenteditable>Amount Paid</span></th>\n\t\t\t\t\t<td><span data-prefix>$</span><span contenteditable>0.00</span></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th><span contenteditable>Balance Due</span></th>\n\t\t\t\t\t<td><span data-prefix>$</span><span>600.00</span></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t\t<table id=\"categoryTotalsTable\">\n\t\t        <thead>\n\t\t            <tr>\n\t\t                <th>HSN/SAC</th>\n\t\t                <th>Taxable Amount</th>\n\t\t                <th>CGST</th>\n\t\t                <th>SGST</th>\n\t\t                <th>Total Tax Amount</th>\n\t\t            </tr>\n\t\t        </thead>\n\t\t        <tbody>\n\t\t            <!-- Category-wise totals will be displayed here using JavaScript -->\n\t\t        </tbody>\n\t\t    </table>\n\t\t</article>\n\t\t<aside>\n\t\t\t<h1><span contenteditable>Terms and Conditions</span></h1>\n\t\t\t<div contenteditable id=\"terms\">\n\t\t\t\t<p>A finance charge of 1.5% will be made on unpaid balances after 30 days.</p>\n\t\t\t</div>\n\t\t</aside>\n\t</form>\n\t</body>\n</html>\n<script type=\"text/javascript\">\nlet button = document.getElementById(\"generate-pdf\");\nlet makepdf = document.getElementById(\"pdf-content\");\n\nbutton.addEventListener(\"click\", function () {\n  html2pdf()\n    .from(makepdf)\n    .set({\n      margin: [10, 0, 10, 0], // Set margins in millimeters (top, right, bottom, left)\n    })\n    .outputPdf('datauristring')\n    .then(function (pdfDataUri) {\n      // Open a new window with the PDF content\n      const newWindow = window.open('', '_blank');\n      newWindow.document.write('<embed width=\"100%\" height=\"100%\" src=\"' + pdfDataUri + '\">');\n      newWindow.document.close();\n    });\n});\nfunction saveInvoice(){\n\tdocument.getElementById(\"invoice_number_input\").value = document.getElementById(\"invoice_number\").innerHTML;\n\tdocument.getElementById(\"invoice_html_input\").value = document.documentElement.outerHTML;\n\tdocument.getElementById(\"save_invoice_form\").submit();\n}\n</script>",
                        "invoice_class": "sales-invoice"
                    },
                    {
                        "order_id": 21,
                        "data_id": 1,
                        "invoice_date": "2023-11-25",
                        "invoice_type": "intra-state",
                        "invoice_amount": 0.0,
                        "invoice_tax_amount": 0.0,
                        "id": 38,
                        "invoice_number": "PROFORMA/3",
                        "invoice_html": "<html><head><style>article,aside,details,figcaption,figure,footer,header,hgroup,nav,section{display:block}audio[controls],canvas,video{display:inline-block}[hidden],audio{display:none}mark{background:#FF0;color:#000}</style>\r\n\t\t<meta charset=\"utf-8\">\r\n\t\t<title>PROFORMA INVOICE</title>\r\n\t\t<link rel=\"stylesheet\" href=\"/static/invoices/invoice_style.css\">\r\n\t\t<link rel=\"license\" href=\"https://www.opensource.org/licenses/mit-license/\">\r\n\t\t<script src=\"/static/invoices/invoice_script.js\"></script>\r\n\t\t<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.2/jspdf.min.js\"></script>\r\n\t\t<script src=\"https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.js\">\r\n    </script>\r\n\t</head>\r\n\t<body id=\"pdf-content\" data-new-gr-c-s-check-loaded=\"14.1141.0\" data-gr-ext-installed=\"\" data-new-gr-c-s-loaded=\"14.1141.0\">\r\n\t<script>\r\n    function convertUnit(itemId, quantityElementids, unitElement, rateElementids=[]) {\r\n        var url = '/units_relation_api?item_ids[]=' + itemId;\r\n\r\n        fetch(url)\r\n            .then(function(response) {\r\n                return response.json();\r\n            })\r\n            .then(function(data) {\r\n                var unitList = data[itemId];\r\n                var currentUnit = unitElement.textContent;\r\n\r\n                length_unitList = Object.keys(unitList).length;\r\n                // console.log(length_unitList);\r\n                if (length_unitList === 1) {\r\n                    // Handle the case when there is only one unit defined\r\n                    console.log('Only one unit is defined for this item.');\r\n                    return;\r\n                }\r\n\r\n                var currentConversionFactor = 1;\r\n\r\n                // Find the current unit's conversion factor\r\n                if (unitList[currentUnit]) {\r\n                    currentConversionFactor = parseFloat(unitList[currentUnit]);\r\n                }\r\n\r\n                // Find the index of the current unit\r\n                var currentIndex = -1;\r\n                for (var i = 0; i < length_unitList; i++) {\r\n                    if (Object.keys(unitList)[i] === currentUnit) {\r\n                        currentIndex = i;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                // Cycle to the next unit\r\n                var nextUnitIndex = (currentIndex + 1) % length_unitList;\r\n                var nextUnit = Object.keys(unitList)[nextUnitIndex];\r\n                var nextConversionFactor = parseFloat(unitList[nextUnit]);\r\n                // Update the UI\r\n                unitElement.textContent = nextUnit;\r\n                unitElement.value = nextUnit;\r\n                for(var i = 0; i <quantityElementids.length; i++){\r\n\r\n                    quantityElement = document.getElementById(quantityElementids[i]);\r\n                    // Update the quantity by multiplying with the conversion factor\r\n                    var currentQuantity = parseFloat(quantityElement.textContent);\r\n                    var currentQuantityValue = parseFloat(quantityElement.value);\r\n                    var newQuantity = currentQuantity * (nextConversionFactor / currentConversionFactor);\r\n                    var newQuantityValue = currentQuantityValue * (nextConversionFactor / currentConversionFactor);\r\n\r\n                    \r\n                    quantityElement.textContent = newQuantity.toFixed(3);\r\n                    quantityElement.value = newQuantityValue.toFixed(3);\r\n                    quantityElement.setAttribute(\"data-parent\", newQuantityValue.toFixed(2))\r\n                    quantityElement.setAttribute(\"data-child\", newQuantityValue.toFixed(2))\r\n                }\r\n                for(var i = 0; i <rateElementids.length; i++){\r\n\r\n                    quantityElement = document.getElementById(rateElementids[i]);\r\n                    // Update the quantity by multiplying with the conversion factor\r\n                    var currentQuantity = parseFloat(quantityElement.textContent);\r\n                    var currentQuantityValue = parseFloat(quantityElement.value);\r\n                    var newQuantity = currentQuantity / (nextConversionFactor / currentConversionFactor);\r\n                    var newQuantityValue = currentQuantityValue / (nextConversionFactor / currentConversionFactor);\r\n\r\n                    \r\n                    quantityElement.textContent = newQuantity.toFixed(3);\r\n                    quantityElement.value = newQuantityValue.toFixed(3);\r\n                    quantityElement.setAttribute(\"data-parent\", newQuantityValue.toFixed(2))\r\n                    quantityElement.setAttribute(\"data-child\", newQuantityValue.toFixed(2))\r\n                }\r\n            })\r\n            .catch(function(error) {\r\n                console.error('Error fetching unit conversion data:', error);\r\n            });\r\n    }\r\n\r\n</script>\r\n\t<form action=\"/save_invoice\" method=\"post\" id=\"save_invoice_form\">\r\n\t\t<input type=\"hidden\" name=\"invoice_id\" value=\"38\">\r\n\t\t<input type=\"hidden\" name=\"invoice_html\" id=\"invoice_html_input\" value=\"\">\r\n\t\t<input type=\"hidden\" name=\"invoice_number\" id=\"invoice_number_input\" value=\"PROFORMA/3\">\r\n\t    <div>\r\n\t\t    <button type=\"button\" onclick=\"saveInvoice()\">Save</button>    \t\r\n\t\t    <button type=\"button\" id=\"generate-pdf\">Generate PDF</button>\r\n\t\t    <button type=\"button\" onclick=\"location.href='/invoices?order_id=21&amp;action=generate&amp;invoice_class=proforma-invoice&amp;invoice_file=proforma_invoice'\">GENERATE NEW INVOICE</button>\r\n\t    </div>\r\n\t\t<header>\r\n\t\t\t<h1>PROFORMA Invoice</h1>\r\n\t\t\t<address contenteditable=\"\" id=\"company_details\">\r\n\t\t\t\t<p style=\"font-weight: bold\">Arotatvika</p>\r\n\t\t\t\t<p>B-9, Opp. Meera Hospital</p>\r\n\t\t\t\t<p>Shiv Marg, Bani Park</p>\r\n\t\t\t\t<p>Jaipur Rajasthan 302016</p>\r\n\t\t\t\t<p>India</p>\r\n\t\t\t\t<p>GSTIN: 08CSYPA3170K1ZA</p>\r\n\t\t\t</address>\r\n\t\t\t<span><img alt=\"\" src=\"\"><input type=\"file\" accept=\"image/*\"></span>\r\n\t\t\t<table class=\"meta\">\r\n\t\t\t\t<tbody><tr>\r\n\t\t\t\t\t<th><span contenteditable=\"\">Invoice #</span></th>\r\n\t\t\t\t\t<td><span contenteditable=\"\" id=\"invoice_number\">PROFORMA/3</span></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th><span contenteditable=\"\">Date</span></th>\r\n\t\t\t\t\t<td><span id=\"invoice_date\">2023-11-25</span></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th><span contenteditable=\"\">Amount Due</span></th>\r\n\t\t\t\t\t<td><span id=\"prefix\" contenteditable=\"\">Rs.</span><span id=\"\">184</span></td>\r\n\t\t\t\t</tr>\r\n\t\t\t</tbody></table>\r\n\t\t</header>\r\n\t\t<article>\r\n\t\t\t\r\n\t\t\t<div>\r\n\t\t\t\t<address contenteditable=\"\" id=\"billing_details\">\r\n\t\t\t\t\t<span style=\"font-weight: bold\">BILL TO: RAQGEN SOLUTIONS PRIVATE LIMITED</span>\r\n\t\t\t\t\t<p style=\"white-space: pre-wrap;\">10 / 20 , fateh kunj, Vidhyadhar Nagar</p>\r\n\t\t\t\t\t<p>GSTIN: </p>\r\n\t\t\t\t</address>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<address contenteditable=\"\" id=\"shipping_details\">\r\n\t\t\t\t\t<span style=\"font-weight: bold\">SHIP TO: RAQGEN SOLUTIONS PRIVATE LIMITED</span>\r\n\t\t\t\t\t<p style=\"white-space: pre-wrap;\">10 / 20 , fateh kunj, Vidhyadhar Nagar</p>\r\n\t\t\t\t\t<p>GSTIN: </p>\r\n\t\t\t\t</address>\r\n\t\t\t</div>\r\n\t\t</article>\r\n\t\t<article>\r\n\t\t\t<table class=\"inventory\">\r\n\t\t\t\t<thead>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">Item</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">HSN/SAC</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">Quantity</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">Unit</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">Rate</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">Discount %</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">CGST</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">SGST</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">Amount</span></th>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</thead>\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<td hidden=\"\" id=\"order_item_id_20\">20</td>\r\n\t\t\t\t\t\t<td><!-- <a class=\"cut\">- -->SF ITEM 1<br><span contenteditable=\"\"></span></td>\r\n\t\t\t\t\t\t<td><span contenteditable=\"\">NA</span></td>\r\n\t\t\t\t\t\t<td><span contenteditable=\"\" id=\"order_item_qty_20\">12.0</span></td>\r\n\t\t\t\t\t\t<td><span id=\"order_item_unit_20\" onclick=\"convertUnit('3', ['order_item_qty_20'], this, ['order_item_sale_price_20'])\">pcs</span></td>\r\n\t\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span contenteditable=\"\" id=\"order_item_sale_price_20\">10.0</span></td>\r\n\t\t\t\t\t\t<td><span contenteditable=\"\" id=\"order_item_discount_percentage_20\">0.0</span></td>\r\n\t\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span id=\"cgst20\">5.45</span>(<span contenteditable=\"\" id=\"cgst_percentage_20\">5</span>%)</td>\r\n\t\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span id=\"sgst20\">5.45</span>(<span contenteditable=\"\" id=\"sgst_percentage_20\">5</span>%)</td>\r\n\t\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span>120</span></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<td hidden=\"\" id=\"order_item_id_19\">19</td>\r\n\t\t\t\t\t\t<td><!-- <a class=\"cut\">- -->FG Item 1<br><span contenteditable=\"\"></span></td>\r\n\t\t\t\t\t\t<td><span contenteditable=\"\">ABC</span></td>\r\n\t\t\t\t\t\t<td><span contenteditable=\"\" id=\"order_item_qty_19\">16.0</span></td>\r\n\t\t\t\t\t\t<td><span id=\"order_item_unit_19\" onclick=\"convertUnit('2', ['order_item_qty_19'], this, ['order_item_sale_price_19'])\">dozens</span></td>\r\n\t\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span contenteditable=\"\" id=\"order_item_sale_price_19\">4.0</span></td>\r\n\t\t\t\t\t\t<td><span contenteditable=\"\" id=\"order_item_discount_percentage_19\">0.0</span></td>\r\n\t\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span id=\"cgst19\">2.91</span>(<span contenteditable=\"\" id=\"cgst_percentage_19\">5</span>%)</td>\r\n\t\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span id=\"sgst19\">2.91</span>(<span contenteditable=\"\" id=\"sgst_percentage_19\">5</span>%)</td>\r\n\t\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span>64</span></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\t\t\t<!-- <a class=\"add\">+</a> -->\r\n\t\t\t<address contenteditable=\"\" style=\"border-width: 0\" id=\"bank_details\">\r\n\t\t\t\t<p>Total in Words:</p>\r\n\t\t\t\t<p>Bank Acc. Details:</p>\r\n\r\n\t\t\t</address>\r\n\t\t\t<table class=\"balance\">\r\n\t\t\t\t<tbody><tr>\r\n\t\t\t\t\t<th><span contenteditable=\"\" id=\"total_amount\">Total</span></th>\r\n\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span>184</span></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th><span contenteditable=\"\">Amount Paid</span></th>\r\n\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span contenteditable=\"\">0.00</span></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th><span contenteditable=\"\">Balance Due</span></th>\r\n\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span>184</span></td>\r\n\t\t\t\t</tr>\r\n\t\t\t</tbody></table>\r\n\t\t\t<table id=\"categoryTotalsTable\">\r\n\t\t        <thead>\r\n\t\t            <tr>\r\n\t\t                <th>HSN/SAC</th>\r\n\t\t                <th>Taxable Amount</th>\r\n\t\t                <th>CGST</th>\r\n\t\t                <th>SGST</th>\r\n\t\t                <th>Total Tax Amount</th>\r\n\t\t            </tr>\r\n\t\t        </thead>\r\n\t\t        <tbody><tr><td>NA</td><td>109.09090909090908</td><td>5.45 (5%)</td><td>5.45 (5%)</td><td>10.9</td></tr><tr><td>ABC</td><td>58.18181818181818</td><td>2.91 (5%)</td><td>2.91 (5%)</td><td>5.82</td></tr><tr><td><strong>Total<strong></strong></strong></td><td>167.27272727272725</td><td>8.36</td><td>8.36</td><td>16.72</td></tr></tbody>\r\n\t\t    </table>\r\n\t\t</article>\r\n\t\t<aside>\r\n\t\t\t<h1><span contenteditable=\"\">Terms and Conditions</span></h1>\r\n\t\t\t<div contenteditable=\"\" id=\"terms\">\r\n\t\t\t\t<p>A finance charge of 1.5% will be made on unpaid balances after 30 days.</p>\r\n\t\t\t</div>\r\n\t\t</aside>\r\n\t</form>\r\n\t\r\n\r\n<script type=\"text/javascript\">\r\nlet button = document.getElementById(\"generate-pdf\");\r\nlet makepdf = document.getElementById(\"pdf-content\");\r\n\r\nbutton.addEventListener(\"click\", function () {\r\n  html2pdf()\r\n    .from(makepdf)\r\n    .set({\r\n      margin: [10, 0, 10, 0], // Set margins in millimeters (top, right, bottom, left)\r\n    })\r\n    .outputPdf('datauristring')\r\n    .then(function (pdfDataUri) {\r\n      // Open a new window with the PDF content\r\n      const newWindow = window.open('', '_blank');\r\n      newWindow.document.write('<embed width=\"100%\" height=\"100%\" src=\"' + pdfDataUri + '\">');\r\n      newWindow.document.close();\r\n    });\r\n});\r\nfunction saveInvoice(){\r\n\tdocument.getElementById(\"invoice_number_input\").value = document.getElementById(\"invoice_number\").innerHTML;\r\n\tdocument.getElementById(\"invoice_html_input\").value = document.documentElement.outerHTML;\r\n\tdocument.getElementById(\"save_invoice_form\").submit();\r\n}\r\n</script><div id=\"torrent-scanner-popup\" style=\"display: none;\"></div><webchatgpt-custom-element-3f766172-9747-45bc-8b4a-c9b50c760aac id=\"webchatgpt-snackbar\" style=\"color: rgb(255, 255, 255);\"></webchatgpt-custom-element-3f766172-9747-45bc-8b4a-c9b50c760aac></body><grammarly-desktop-integration data-grammarly-shadow-root=\"true\"></grammarly-desktop-integration></html>",
                        "invoice_class": "proforma-invoice"
                    },
                    {
                        "order_id": 21,
                        "data_id": 1,
                        "invoice_date": "2024-01-11",
                        "invoice_type": "intra-state",
                        "invoice_amount": 0.0,
                        "invoice_tax_amount": 0.0,
                        "id": 62,
                        "invoice_number": "PROFORMA/9",
                        "invoice_html": "\n<html>\n\t<head>\n\t\t<meta charset=\"utf-8\">\n\t\t<title>PROFORMA INVOICE</title>\n\t\t<link rel=\"stylesheet\" href=\"/static/invoices/invoice_style.css\">\n\t\t<link rel=\"license\" href=\"https://www.opensource.org/licenses/mit-license/\">\n\t\t\n\t\t<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.2/jspdf.min.js\"></script>\n\t\t<script src=\n\"https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.js\">\n\t    </script>\n\t</head>\n\t<body id=\"pdf-content\">\n\t<script>\n    function convertUnit(itemId, quantityElementids, unitElement, rateElementids=[]) {\n        var url = '/units_relation_api?item_ids[]=' + itemId;\n\n        fetch(url)\n            .then(function(response) {\n                return response.json();\n            })\n            .then(function(data) {\n                var unitList = data[itemId];\n                var currentUnit = unitElement.textContent;\n\n                length_unitList = Object.keys(unitList).length;\n                // console.log(length_unitList);\n                if (length_unitList === 1) {\n                    // Handle the case when there is only one unit defined\n                    console.log('Only one unit is defined for this item.');\n                    return;\n                }\n\n                var currentConversionFactor = 1;\n\n                // Find the current unit's conversion factor\n                if (unitList[currentUnit]) {\n                    currentConversionFactor = parseFloat(unitList[currentUnit]);\n                }\n\n                // Find the index of the current unit\n                var currentIndex = -1;\n                for (var i = 0; i < length_unitList; i++) {\n                    if (Object.keys(unitList)[i] === currentUnit) {\n                        currentIndex = i;\n                        break;\n                    }\n                }\n\n                // Cycle to the next unit\n                var nextUnitIndex = (currentIndex + 1) % length_unitList;\n                var nextUnit = Object.keys(unitList)[nextUnitIndex];\n                var nextConversionFactor = parseFloat(unitList[nextUnit]);\n                // Update the UI\n                unitElement.textContent = nextUnit;\n                unitElement.value = nextUnit;\n                for(var i = 0; i <quantityElementids.length; i++){\n\n                    quantityElement = document.getElementById(quantityElementids[i]);\n                    // Update the quantity by multiplying with the conversion factor\n                    var currentQuantity = parseFloat(quantityElement.textContent);\n                    var currentQuantityValue = parseFloat(quantityElement.value);\n                    var newQuantity = currentQuantity * (nextConversionFactor / currentConversionFactor);\n                    var newQuantityValue = currentQuantityValue * (nextConversionFactor / currentConversionFactor);\n\n                    \n                    quantityElement.textContent = newQuantity.toFixed(3);\n                    quantityElement.value = newQuantityValue.toFixed(3);\n                    quantityElement.setAttribute(\"data-parent\", newQuantityValue.toFixed(2))\n                    quantityElement.setAttribute(\"data-child\", newQuantityValue.toFixed(2))\n                }\n                for(var i = 0; i <rateElementids.length; i++){\n\n                    quantityElement = document.getElementById(rateElementids[i]);\n                    // Update the quantity by multiplying with the conversion factor\n                    var currentQuantity = parseFloat(quantityElement.textContent);\n                    var currentQuantityValue = parseFloat(quantityElement.value);\n                    var newQuantity = currentQuantity / (nextConversionFactor / currentConversionFactor);\n                    var newQuantityValue = currentQuantityValue / (nextConversionFactor / currentConversionFactor);\n\n                    \n                    quantityElement.textContent = newQuantity.toFixed(3);\n                    quantityElement.value = newQuantityValue.toFixed(3);\n                    quantityElement.setAttribute(\"data-parent\", newQuantityValue.toFixed(2))\n                    quantityElement.setAttribute(\"data-child\", newQuantityValue.toFixed(2))\n                }\n            })\n            .catch(function(error) {\n                console.error('Error fetching unit conversion data:', error);\n            });\n    }\n\n</script>\n\t<script>\n    function convertCurrencyToWords(price) {\n        console.log(price)\n  var sglDigit = [\"Zero\", \"One\", \"Two\", \"Three\", \"Four\", \"Five\", \"Six\", \"Seven\", \"Eight\", \"Nine\"],\n    dblDigit = [\"Ten\", \"Eleven\", \"Twelve\", \"Thirteen\", \"Fourteen\", \"Fifteen\", \"Sixteen\", \"Seventeen\", \"Eighteen\", \"Nineteen\"],\n    tensPlace = [\"\", \"Ten\", \"Twenty\", \"Thirty\", \"Forty\", \"Fifty\", \"Sixty\", \"Seventy\", \"Eighty\", \"Ninety\"],\n    handle_tens = function(dgt, prevDgt) {\n      return 0 == dgt ? \"\" : \" \" + (1 == dgt ? dblDigit[prevDgt] : tensPlace[dgt])\n    },\n    handle_utlc = function(dgt, nxtDgt, denom) {\n      return (0 != dgt && 1 != nxtDgt ? \" \" + sglDigit[dgt] : \"\") + (0 != nxtDgt || dgt > 0 ? \" \" + denom : \"\")\n    };\n\n  var str = \"\",\n    digitIdx = 0,\n    digit = 0,\n    nxtDigit = 0,\n    words = [];\n  if (price += \"\", isNaN(parseInt(price))) str = \"\";\n  else if (parseInt(price) > 0 && price.length <= 10) {\n    for (digitIdx = price.length - 1; digitIdx >= 0; digitIdx--) switch (digit = price[digitIdx] - 0, nxtDigit = digitIdx > 0 ? price[digitIdx - 1] - 0 : 0, price.length - digitIdx - 1) {\n      case 0:\n        words.push(handle_utlc(digit, nxtDigit, \"\"));\n        break;\n      case 1:\n        words.push(handle_tens(digit, price[digitIdx + 1]));\n        break;\n      case 2:\n        words.push(0 != digit ? \" \" + sglDigit[digit] + \" Hundred\" + (0 != price[digitIdx + 1] && 0 != price[digitIdx + 2] ? \" and\" : \"\") : \"\");\n        break;\n      case 3:\n        words.push(handle_utlc(digit, nxtDigit, \"Thousand\"));\n        break;\n      case 4:\n        words.push(handle_tens(digit, price[digitIdx + 1]));\n        break;\n      case 5:\n        words.push(handle_utlc(digit, nxtDigit, \"Lakh\"));\n        break;\n      case 6:\n        words.push(handle_tens(digit, price[digitIdx + 1]));\n        break;\n      case 7:\n        words.push(handle_utlc(digit, nxtDigit, \"Crore\"));\n        break;\n      case 8:\n        words.push(handle_tens(digit, price[digitIdx + 1]));\n        break;\n      case 9:\n        words.push(0 != digit ? \" \" + sglDigit[digit] + \" Hundred\" + (0 != price[digitIdx + 1] || 0 != price[digitIdx + 2] ? \" and\" : \" Crore\") : \"\")\n    }\n    str = words.reverse().join(\"\")\n  } else str = \"\";\n  return str\n\n}\n</script>\n\t<script src=\"/static/invoices/invoice_script.js\"></script>\n\t<form action=\"/save_invoice\" method=\"post\" id=\"save_invoice_form\">\n\t\t<input type=\"hidden\" name=\"invoice_id\" value=\"62\">\n\t\t<input type=\"hidden\" name=\"invoice_html\" id=\"invoice_html_input\" value=\"\">\n\t\t<input type=\"hidden\" name=\"invoice_number\" id=\"invoice_number_input\" value=\"\">\n\t    <div>\n\t\t    <button type=\"button\" onclick=\"saveInvoice()\">Save</button>    \t\n\t\t    <button type=\"button\" id=\"generate-pdf\" >Generate PDF</button>\n\t\t    <button type=\"button\" onclick=\"location.href='/invoices?order_id=21&action=generate&invoice_class=proforma-invoice&invoice_file=proforma_invoice&intra_state_gst_flag=YES'\">GENERATE NEW INTRA-STATE INVOICE</button>\n\t\t    <button type=\"button\" onclick=\"location.href='/invoices?order_id=21&action=generate&invoice_class=proforma-invoice&invoice_file=proforma_invoice&intra_state_gst_flag=NO'\">GENERATE NEW INTER-STATE INVOICE</button>\n\t\t    <span>\n\t\t    TAX-EXCLUSIVE RATES?\n\t\t    <input type=\"checkbox\" onclick=\"toggleTaxExclusive();\">\n\t\t    </span>\n\n\t    </div>\n\t\t<header>\n\t\t\t<h1>PROFORMA Invoice</h1>\n\t\t\t<address contenteditable id=\"company_details\">\n\t\t\t\t<p style=\"font-weight: bold\">VEDANT AGRAWAL_J3VU4NZYT5</p>\n\t\t\t\t<p></p>\n\t\t\t\t<p><strong>GSTIN:</strong></p>\n\t\t\t</address>\n\t\t\t<span><img alt=\"\" src=\"\"><input type=\"file\" accept=\"image/*\"></span>\n\t\t\t<table class=\"meta\">\n\t\t\t\t<tr>\n\t\t\t\t\t<th><span contenteditable>Invoice #</span></th>\n\t\t\t\t\t<td><span contenteditable id=\"invoice_number\">PROFORMA/9</span></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th><span contenteditable>Date</span></th>\n\t\t\t\t\t<td><span id=\"invoice_date\">2024-01-11</span></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th><span contenteditable>Currency</span></th>\n\t\t\t\t\t<td><span id=\"prefix\" contenteditable>₹</span><span id=\"\"></span></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</header>\n\t\t<article>\n\t\t\t\n\t\t\t<div>\n\t\t\t\t<address contenteditable id=\"billing_details\">\n\t\t\t\t\t<span style=\"font-weight: bold\">BILL TO: RAQGEN SOLUTIONS PRIVATE LIMITED</span>\n\t\t\t\t\t<p style=\"white-space: pre-wrap;\">10 / 20 , fateh kunj, Vidhyadhar Nagar</p>\n\t\t\t\t\t<p>GSTIN: </p>\n\t\t\t\t</address>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<address contenteditable id=\"shipping_details\">\n\t\t\t\t\t<span style=\"font-weight: bold\">SHIP TO: RAQGEN SOLUTIONS PRIVATE LIMITED</span>\n\t\t\t\t\t<p style=\"white-space: pre-wrap;\">10 / 20 , fateh kunj, Vidhyadhar Nagar</p>\n\t\t\t\t\t<p>GSTIN: </p>\n\t\t\t\t</address>\n\t\t\t</div>\n\t\t</article>\n\t\t<article>\n\t\t\t<table class=\"inventory\">\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th style=\"text-align: center; width: 6rem;\"><span contenteditable>Item</span></th>\n\t\t\t\t\t\t<th style=\"text-align: center; width: 1.4rem;\"><span contenteditable>HSN/SAC</span></th>\n\t\t\t\t\t\t<th style=\"text-align: center; width: 1.4rem;\"><span contenteditable>Quantity</span></th>\n\t\t\t\t\t\t<th style=\"text-align: center; width: 1.4rem;\"><span contenteditable>Unit</span></th>\n\t\t\t\t\t\t<th style=\"text-align: center; width: 1.4rem;\"><span contenteditable>Rate<br>(<span data-prefix>$</span>)</span></th>\n\t\t\t\t\t\t<th style=\"text-align: center; width: 1.4rem;\"><span contenteditable>Discount %</span></th>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<th style=\"text-align: center; width: 1.4rem;\"><span contenteditable>CGST<br>(<span data-prefix>$</span>)</span></th>\n\t\t\t\t\t\t<th style=\"text-align: center; width: 1.4rem;\"><span contenteditable>SGST<br>(<span data-prefix>$</span>)</span></th>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<th style=\"text-align: center; width: 1.4rem;\"><span contenteditable>Amount<br>(<span data-prefix>$</span>)</span></th>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t\t<!-- <a class=\"add\">+</a> -->\n\t\t\t<address contenteditable style=\"border-width: 0\" id=\"bank_details\">\n\t\t\t\t<p><strong>Total Quantities:</strong><strong id='total_in_qty' style=\"font-weight: bold\"></strong></p>\n\t\t\t\t<p><strong>Total Amount in Words:</strong><strong id='total_in_word' style=\"font-weight: bold\"></strong></p>\n\t\t\t\t<p>Bank Acc. Details:</p>\n\t\t\t</address>\n\t\t\t<table class=\"balance\">\n\t\t\t\t<tr>\n\t\t\t\t\t<th><span contenteditable >Sub Total<br><span class=\"inclusivity_text\">(tax inclusive)</span></th>\n\t\t\t\t\t<td><span data-prefix>$</span><span id=\"sub_total_amount\">600.00</span></td>\n\t\t\t\t</tr>\n\t\t\t\t\n\t\t\t\t<tr>\n\t\t\t\t\t<th><span contenteditable >Total CGST</span></th>\n\t\t\t\t\t<td><span data-prefix>$</span><span id=\"cgst_amount\">600.00</span></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th><span contenteditable >Total SGST</span></th>\n\t\t\t\t\t<td><span data-prefix>$</span><span id=\"sgst_amount\">600.00</span></td>\n\t\t\t\t</tr>\n\t\t\t\t\n\t\t\t\t<tr>\n\t\t\t\t\t<th><span contenteditable >Total Amount</span></th>\n\t\t\t\t\t<td><span data-prefix>$</span><span id=\"total_amount\">600.00</span></td>\n\t\t\t\t</tr>\n\n\t\t\t\t<tr hidden>\n\t\t\t\t\t<th><span contenteditable>Amount Paid</span></th>\n\t\t\t\t\t<td><span data-prefix>$</span><span contenteditable>0.00</span></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr hidden>\n\t\t\t\t\t<th><span contenteditable>Balance Due</span></th>\n\t\t\t\t\t<td><span data-prefix>$</span><span>600.00</span></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t\t<table id=\"categoryTotalsTable\">\n\t\t        <thead>\n\t\t            <tr>\n\t\t                <th>HSN/SAC</th>\n\t\t                <th>Taxable Amount</th>\n\t\t                \n\t\t                <th>CGST</th>\n\t\t                <th>SGST</th>\n\t\t                \n\t\t                <th>Total Tax Amount</th>\n\t\t            </tr>\n\t\t        </thead>\n\t\t        <tbody>\n\t\t            <!-- Category-wise totals will be displayed here using JavaScript -->\n\t\t        </tbody>\n\t\t    </table>\n\t\t</article>\n\t\t<aside>\n\t\t\t<h1><span contenteditable>Terms and Conditions</span></h1>\n\t\t\t<div contenteditable id=\"terms\">\n\t\t\t\t<p>A finance charge of 1.5% will be made on unpaid balances after 30 days.</p>\n\t\t\t</div>\n\t\t</aside>\n\t</form>\n\n\t<input type=\"hidden\" name=\"tax_exclusive_price_flag\" id=\"tax_exclusive_price_flag\" value='NO'>\n\t<input type=\"hidden\" name=\"intra_state_gst_flag\" id=\"intra_state_gst_flag\" value='YES'>\n\t</body>\n</html>\n<script type=\"text/javascript\">\nlet button = document.getElementById(\"generate-pdf\");\nlet makepdf = document.getElementById(\"pdf-content\");\n\nbutton.addEventListener(\"click\", function () {\n  html2pdf()\n    .from(makepdf)\n    .set({\n      margin: [10, 0, 10, 0], // Set margins in millimeters (top, right, bottom, left)\n    })\n    .outputPdf('datauristring')\n    .then(function (pdfDataUri) {\n      // Open a new window with the PDF content\n      const newWindow = window.open('', '_blank');\n      newWindow.document.write('<embed width=\"100%\" height=\"100%\" src=\"' + pdfDataUri + '\">');\n      newWindow.document.close();\n    });\n});\nfunction saveInvoice(){\n\tdocument.getElementById(\"invoice_number_input\").value = document.getElementById(\"invoice_number\").innerHTML;\n\tdocument.getElementById(\"invoice_html_input\").value = document.documentElement.outerHTML;\n\tdocument.getElementById(\"save_invoice_form\").submit();\n}\nfunction toggleTaxExclusive(){\n\tconsole.log(\"CHECKED!\");\n\tvalue_tax_element = document.getElementById(\"tax_exclusive_price_flag\");\n\tif(value_tax_element.value == 'YES'){\n\t\tvalue_tax_element.value = \"NO\";\n\t}\n\telse{\n\t\tvalue_tax_element.value = \"YES\";\n\t}\n\tupdateInvoice();\n}\n</script>",
                        "invoice_class": "proforma-invoice"
                    },
                    {
                        "order_id": 21,
                        "data_id": 1,
                        "invoice_date": "2024-01-11",
                        "invoice_type": "intra-state",
                        "invoice_amount": 0.0,
                        "invoice_tax_amount": 0.0,
                        "id": 63,
                        "invoice_number": "DELIVERY/8",
                        "invoice_html": "\n<html>\n\t<head>\n\t\t<meta charset=\"utf-8\">\n\t\t<title>DELIVERY CHALLAN</title>\n\t\t<link rel=\"stylesheet\" href=\"/static/invoices/invoice_style.css\">\n\t\t<link rel=\"license\" href=\"https://www.opensource.org/licenses/mit-license/\">\n\t\t<!-- <script src=\"/static/invoices/invoice_script.js\"></script> -->\n\t\t<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.2/jspdf.min.js\"></script>\n\t\t<script src=\n\"https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.js\">\n    </script>\n\t</head>\n\t<body id=\"pdf-content\">\n\t<script>\n    function convertUnit(itemId, quantityElementids, unitElement, rateElementids=[]) {\n        var url = '/units_relation_api?item_ids[]=' + itemId;\n\n        fetch(url)\n            .then(function(response) {\n                return response.json();\n            })\n            .then(function(data) {\n                var unitList = data[itemId];\n                var currentUnit = unitElement.textContent;\n\n                length_unitList = Object.keys(unitList).length;\n                // console.log(length_unitList);\n                if (length_unitList === 1) {\n                    // Handle the case when there is only one unit defined\n                    console.log('Only one unit is defined for this item.');\n                    return;\n                }\n\n                var currentConversionFactor = 1;\n\n                // Find the current unit's conversion factor\n                if (unitList[currentUnit]) {\n                    currentConversionFactor = parseFloat(unitList[currentUnit]);\n                }\n\n                // Find the index of the current unit\n                var currentIndex = -1;\n                for (var i = 0; i < length_unitList; i++) {\n                    if (Object.keys(unitList)[i] === currentUnit) {\n                        currentIndex = i;\n                        break;\n                    }\n                }\n\n                // Cycle to the next unit\n                var nextUnitIndex = (currentIndex + 1) % length_unitList;\n                var nextUnit = Object.keys(unitList)[nextUnitIndex];\n                var nextConversionFactor = parseFloat(unitList[nextUnit]);\n                // Update the UI\n                unitElement.textContent = nextUnit;\n                unitElement.value = nextUnit;\n                for(var i = 0; i <quantityElementids.length; i++){\n\n                    quantityElement = document.getElementById(quantityElementids[i]);\n                    // Update the quantity by multiplying with the conversion factor\n                    var currentQuantity = parseFloat(quantityElement.textContent);\n                    var currentQuantityValue = parseFloat(quantityElement.value);\n                    var newQuantity = currentQuantity * (nextConversionFactor / currentConversionFactor);\n                    var newQuantityValue = currentQuantityValue * (nextConversionFactor / currentConversionFactor);\n\n                    \n                    quantityElement.textContent = newQuantity.toFixed(3);\n                    quantityElement.value = newQuantityValue.toFixed(3);\n                    quantityElement.setAttribute(\"data-parent\", newQuantityValue.toFixed(2))\n                    quantityElement.setAttribute(\"data-child\", newQuantityValue.toFixed(2))\n                }\n                for(var i = 0; i <rateElementids.length; i++){\n\n                    quantityElement = document.getElementById(rateElementids[i]);\n                    // Update the quantity by multiplying with the conversion factor\n                    var currentQuantity = parseFloat(quantityElement.textContent);\n                    var currentQuantityValue = parseFloat(quantityElement.value);\n                    var newQuantity = currentQuantity / (nextConversionFactor / currentConversionFactor);\n                    var newQuantityValue = currentQuantityValue / (nextConversionFactor / currentConversionFactor);\n\n                    \n                    quantityElement.textContent = newQuantity.toFixed(3);\n                    quantityElement.value = newQuantityValue.toFixed(3);\n                    quantityElement.setAttribute(\"data-parent\", newQuantityValue.toFixed(2))\n                    quantityElement.setAttribute(\"data-child\", newQuantityValue.toFixed(2))\n                }\n            })\n            .catch(function(error) {\n                console.error('Error fetching unit conversion data:', error);\n            });\n    }\n\n</script>\n\t<form action=\"/save_invoice\" method=\"post\" id=\"save_invoice_form\">\n\t\t<input type=\"hidden\" name=\"invoice_id\" value=\"63\">\n\t\t<input type=\"hidden\" name=\"invoice_html\" id=\"invoice_html_input\" value=\"\">\n\t\t<input type=\"hidden\" name=\"invoice_number\" id=\"invoice_number_input\" value=\"\">\n\t    <div>\n\t\t    <button type=\"button\" onclick=\"saveInvoice()\">Save</button>    \t\n\t\t    <button type=\"button\" id=\"generate-pdf\" >Generate PDF</button>\n\t\t    <button type=\"button\" onclick=\"location.href='/invoices?order_id=21&action=generate&invoice_class=delivery-slip&invoice_file=delivery_slip'\">GENERATE NEW INVOICE</button>\n\t    </div>\n\t\t<header>\n\t\t\t<h1>DELIVERY CHALLAN</h1>\n\t\t\t<address contenteditable id=\"company_details\">\n\t\t\t\t<p style=\"font-weight: bold\">VEDANT AGRAWAL_J3VU4NZYT5</p>\n\t\t\t\t<p></p>\n\t\t\t\t<p><strong>GSTIN:</strong></p>\n\t\t\t</address>\n\t\t\t<span><img alt=\"\" src=\"\"><input type=\"file\" accept=\"image/*\"></span>\n\t\t\t<table class=\"meta\">\n\t\t\t\t<tr>\n\t\t\t\t\t<th><span contenteditable>Invoice #</span></th>\n\t\t\t\t\t<td><span contenteditable id=\"invoice_number\">DELIVERY/8</span></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th><span contenteditable>Date</span></th>\n\t\t\t\t\t<td><span id=\"invoice_date\">2024-01-11</span></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th><span contenteditable>Amount Due</span></th>\n\t\t\t\t\t<td><span id=\"prefix\" contenteditable>Rs.</span><span id=\"\">600.00</span></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</header>\n\t\t<article>\n\t\t\t\n\t\t\t<div>\n\t\t\t\t<address contenteditable id=\"billing_details\">\n\t\t\t\t\t<span style=\"font-weight: bold\">BILL TO: RAQGEN SOLUTIONS PRIVATE LIMITED</span>\n\t\t\t\t\t<p style=\"white-space: pre-wrap;\">10 / 20 , fateh kunj, Vidhyadhar Nagar</p>\n\t\t\t\t\t<p>GSTIN: </p>\n\t\t\t\t</address>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<address contenteditable id=\"shipping_details\">\n\t\t\t\t\t<span style=\"font-weight: bold\">SHIP TO: RAQGEN SOLUTIONS PRIVATE LIMITED</span>\n\t\t\t\t\t<p style=\"white-space: pre-wrap;\">10 / 20 , fateh kunj, Vidhyadhar Nagar</p>\n\t\t\t\t\t<p>GSTIN: </p>\n\t\t\t\t</address>\n\t\t\t</div>\n\t\t</article>\n\t\t<article>\n\t\t\t<table class=\"inventory\">\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th><span contenteditable>Item</span></th>\n\t\t\t\t\t\t<th><span contenteditable>HSN/SAC</span></th>\n\t\t\t\t\t\t<th><span contenteditable>Quantity</span></th>\n\t\t\t\t\t\t<th><span contenteditable>Unit</span></th>\n\t\t\t\t\t\t<!-- <th><span contenteditable>Rate</span></th>\n\t\t\t\t\t\t<th><span contenteditable>Discount %</span></th>\n\t\t\t\t\t\t<th><span contenteditable>CGST</span></th>\n\t\t\t\t\t\t<th><span contenteditable>SGST</span></th>\n\t\t\t\t\t\t<th><span contenteditable>Amount</span></th> -->\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t\t<!-- <a class=\"add\">+</a> -->\n\t\t\t<address contenteditable style=\"border-width: 0\" id=\"bank_details\" style=\"display: none;\">\n\t\t\t\t<p>Total in Words:</p>\n\t\t\t\t<p>Bank Acc. Details:</p>\n\n\t\t\t</address>\n\t\t\t<table class=\"balance\" style=\"display: none;\">\n\t\t\t\t<tr>\n\t\t\t\t\t<th><span contenteditable >Total</span></th>\n\t\t\t\t\t<td><span data-prefix>$</span><span id=\"total_amount\">600.00</span></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th><span contenteditable>Amount Paid</span></th>\n\t\t\t\t\t<td><span data-prefix>$</span><span contenteditable>0.00</span></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th><span contenteditable>Balance Due</span></th>\n\t\t\t\t\t<td><span data-prefix>$</span><span>600.00</span></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t\t<table id=\"categoryTotalsTable\" style=\"display: none;\">\n\t\t        <thead>\n\t\t            <tr>\n\t\t                <th>HSN/SAC</th>\n\t\t                <th>Taxable Amount</th>\n\t\t                <th>CGST</th>\n\t\t                <th>SGST</th>\n\t\t                <th>Total Tax Amount</th>\n\t\t            </tr>\n\t\t        </thead>\n\t\t        <tbody>\n\t\t            <!-- Category-wise totals will be displayed here using JavaScript -->\n\t\t        </tbody>\n\t\t    </table>\n\t\t</article>\n\t\t<aside>\n\t\t\t<h1><span contenteditable>Terms and Conditions</span></h1>\n\t\t\t<div contenteditable id=\"terms\">\n\t\t\t\t<p>A finance charge of 1.5% will be made on unpaid balances after 30 days.</p>\n\t\t\t</div>\n\t\t</aside>\n\t</form>\n\t</body>\n</html>\n<script type=\"text/javascript\">\nlet button = document.getElementById(\"generate-pdf\");\nlet makepdf = document.getElementById(\"pdf-content\");\n\nbutton.addEventListener(\"click\", function () {\n  html2pdf()\n    .from(makepdf)\n    .set({\n      margin: [10, 0, 10, 0], // Set margins in millimeters (top, right, bottom, left)\n    })\n    .outputPdf('datauristring')\n    .then(function (pdfDataUri) {\n      // Open a new window with the PDF content\n      const newWindow = window.open('', '_blank');\n      newWindow.document.write('<embed width=\"100%\" height=\"100%\" src=\"' + pdfDataUri + '\">');\n      newWindow.document.close();\n    });\n});\nfunction saveInvoice(){\n\tdocument.getElementById(\"invoice_number_input\").value = document.getElementById(\"invoice_number\").innerHTML;\n\tdocument.getElementById(\"invoice_html_input\").value = document.documentElement.outerHTML;\n\tdocument.getElementById(\"save_invoice_form\").submit();\n}\n</script>",
                        "invoice_class": "delivery-slip"
                    },
                    {
                        "order_id": 21,
                        "data_id": 1,
                        "invoice_date": "2023-11-25",
                        "invoice_type": "intra-state",
                        "invoice_amount": 0.0,
                        "invoice_tax_amount": 0.0,
                        "id": 39,
                        "invoice_number": "DELIVERY/GST/2",
                        "invoice_html": "<html><head>\r\n\t\t<meta charset=\"utf-8\">\r\n\t\t<title>PROFORMA INVOICE</title>\r\n\t\t<link rel=\"stylesheet\" href=\"/static/invoices/invoice_style.css\">\r\n\t\t<link rel=\"license\" href=\"https://www.opensource.org/licenses/mit-license/\">\r\n\t\t<!-- <script src=\"/static/invoices/invoice_script.js\"></script> -->\r\n\t\t<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.2/jspdf.min.js\"></script>\r\n\t\t<script src=\"https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.js\">\r\n    </script>\r\n\t</head>\r\n\t<body id=\"pdf-content\" data-new-gr-c-s-check-loaded=\"14.1141.0\" data-gr-ext-installed=\"\">\r\n\t<script>\r\n    function convertUnit(itemId, quantityElementids, unitElement, rateElementids=[]) {\r\n        var url = '/units_relation_api?item_ids[]=' + itemId;\r\n\r\n        fetch(url)\r\n            .then(function(response) {\r\n                return response.json();\r\n            })\r\n            .then(function(data) {\r\n                var unitList = data[itemId];\r\n                var currentUnit = unitElement.textContent;\r\n\r\n                length_unitList = Object.keys(unitList).length;\r\n                // console.log(length_unitList);\r\n                if (length_unitList === 1) {\r\n                    // Handle the case when there is only one unit defined\r\n                    console.log('Only one unit is defined for this item.');\r\n                    return;\r\n                }\r\n\r\n                var currentConversionFactor = 1;\r\n\r\n                // Find the current unit's conversion factor\r\n                if (unitList[currentUnit]) {\r\n                    currentConversionFactor = parseFloat(unitList[currentUnit]);\r\n                }\r\n\r\n                // Find the index of the current unit\r\n                var currentIndex = -1;\r\n                for (var i = 0; i < length_unitList; i++) {\r\n                    if (Object.keys(unitList)[i] === currentUnit) {\r\n                        currentIndex = i;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                // Cycle to the next unit\r\n                var nextUnitIndex = (currentIndex + 1) % length_unitList;\r\n                var nextUnit = Object.keys(unitList)[nextUnitIndex];\r\n                var nextConversionFactor = parseFloat(unitList[nextUnit]);\r\n                // Update the UI\r\n                unitElement.textContent = nextUnit;\r\n                unitElement.value = nextUnit;\r\n                for(var i = 0; i <quantityElementids.length; i++){\r\n\r\n                    quantityElement = document.getElementById(quantityElementids[i]);\r\n                    // Update the quantity by multiplying with the conversion factor\r\n                    var currentQuantity = parseFloat(quantityElement.textContent);\r\n                    var currentQuantityValue = parseFloat(quantityElement.value);\r\n                    var newQuantity = currentQuantity * (nextConversionFactor / currentConversionFactor);\r\n                    var newQuantityValue = currentQuantityValue * (nextConversionFactor / currentConversionFactor);\r\n\r\n                    \r\n                    quantityElement.textContent = newQuantity.toFixed(3);\r\n                    quantityElement.value = newQuantityValue.toFixed(3);\r\n                    quantityElement.setAttribute(\"data-parent\", newQuantityValue.toFixed(2))\r\n                    quantityElement.setAttribute(\"data-child\", newQuantityValue.toFixed(2))\r\n                }\r\n                for(var i = 0; i <rateElementids.length; i++){\r\n\r\n                    quantityElement = document.getElementById(rateElementids[i]);\r\n                    // Update the quantity by multiplying with the conversion factor\r\n                    var currentQuantity = parseFloat(quantityElement.textContent);\r\n                    var currentQuantityValue = parseFloat(quantityElement.value);\r\n                    var newQuantity = currentQuantity / (nextConversionFactor / currentConversionFactor);\r\n                    var newQuantityValue = currentQuantityValue / (nextConversionFactor / currentConversionFactor);\r\n\r\n                    \r\n                    quantityElement.textContent = newQuantity.toFixed(3);\r\n                    quantityElement.value = newQuantityValue.toFixed(3);\r\n                    quantityElement.setAttribute(\"data-parent\", newQuantityValue.toFixed(2))\r\n                    quantityElement.setAttribute(\"data-child\", newQuantityValue.toFixed(2))\r\n                }\r\n            })\r\n            .catch(function(error) {\r\n                console.error('Error fetching unit conversion data:', error);\r\n            });\r\n    }\r\n\r\n</script>\r\n\t<form action=\"/save_invoice\" method=\"post\" id=\"save_invoice_form\">\r\n\t\t<input type=\"hidden\" name=\"invoice_id\" value=\"39\">\r\n\t\t<input type=\"hidden\" name=\"invoice_html\" id=\"invoice_html_input\" value=\"\">\r\n\t\t<input type=\"hidden\" name=\"invoice_number\" id=\"invoice_number_input\" value=\"DELIVERY/GST/2\">\r\n\t    <div>\r\n\t\t    <button type=\"button\" onclick=\"saveInvoice()\">Save</button>    \t\r\n\t\t    <button type=\"button\" id=\"generate-pdf\">Generate PDF</button>\r\n\t\t    <button type=\"button\" onclick=\"location.href='/invoices?order_id=21&amp;action=generate&amp;invoice_class=delivery-slip&amp;invoice_file=delivery_slip'\">GENERATE NEW INVOICE</button>\r\n\t    </div>\r\n\t\t<header>\r\n\t\t\t<h1>PROFORMA Invoice</h1>\r\n\t\t\t<address contenteditable=\"\" id=\"company_details\">\r\n\t\t\t\t<p style=\"font-weight: bold\">Arotatvika</p>\r\n\t\t\t\t<p>B-9, Opp. Meera Hospital</p>\r\n\t\t\t\t<p>Shiv Marg, Bani Park</p>\r\n\t\t\t\t<p>Jaipur Rajasthan 302016</p>\r\n\t\t\t\t<p>India</p>\r\n\t\t\t\t<p>GSTIN: 08CSYPA3170K1ZA</p>\r\n\t\t\t</address>\r\n\t\t\t<span><img alt=\"\" src=\"\"><input type=\"file\" accept=\"image/*\"></span>\r\n\t\t\t<table class=\"meta\">\r\n\t\t\t\t<tbody><tr>\r\n\t\t\t\t\t<th><span contenteditable=\"\">Invoice #</span></th>\r\n\t\t\t\t\t<td><span contenteditable=\"\" id=\"invoice_number\">DELIVERY/GST/2</span></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th><span contenteditable=\"\">Date</span></th>\r\n\t\t\t\t\t<td><span id=\"invoice_date\">2023-11-25</span></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th><span contenteditable=\"\">Amount Due</span></th>\r\n\t\t\t\t\t<td><span id=\"prefix\" contenteditable=\"\">Rs.</span><span id=\"\">600.00</span></td>\r\n\t\t\t\t</tr>\r\n\t\t\t</tbody></table>\r\n\t\t</header>\r\n\t\t<article>\r\n\t\t\t\r\n\t\t\t<div>\r\n\t\t\t\t<address contenteditable=\"\" id=\"billing_details\">\r\n\t\t\t\t\t<span style=\"font-weight: bold\">BILL TO: RAQGEN SOLUTIONS PRIVATE LIMITED</span>\r\n\t\t\t\t\t<p style=\"white-space: pre-wrap;\">10 / 20 , fateh kunj, Vidhyadhar Nagar</p>\r\n\t\t\t\t\t<p>GSTIN: </p>\r\n\t\t\t\t</address>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<address contenteditable=\"\" id=\"shipping_details\">\r\n\t\t\t\t\t<span style=\"font-weight: bold\">SHIP TO: RAQGEN SOLUTIONS PRIVATE LIMITED</span>\r\n\t\t\t\t\t<p style=\"white-space: pre-wrap;\">10 / 20 , fateh kunj, Vidhyadhar Nagar</p>\r\n\t\t\t\t\t<p>GSTIN: </p>\r\n\t\t\t\t</address>\r\n\t\t\t</div>\r\n\t\t</article>\r\n\t\t<article>\r\n\t\t\t<table class=\"inventory\">\r\n\t\t\t\t<thead>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">Item</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">HSN/SAC</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">Quantity</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">Unit</span></th>\r\n\t\t\t\t\t\t<!-- <th><span contenteditable>Rate</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable>Discount %</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable>CGST</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable>SGST</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable>Amount</span></th> -->\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</thead>\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<td hidden=\"\" id=\"order_item_id_19\">19</td>\r\n\t\t\t\t\t\t<td><!-- <a class=\"cut\">- -->FG Item 1<br><span contenteditable=\"\"></span></td>\r\n\t\t\t\t\t\t<td><span contenteditable=\"\">ABC</span></td>\r\n\t\t\t\t\t\t<td><span contenteditable=\"\" id=\"order_item_qty_19\">14.0</span></td>\r\n\t\t\t\t\t\t<td><span id=\"order_item_unit_19\" onclick=\"convertUnit('2', ['order_item_qty_19'], this, ['order_item_sale_price_19'])\">dozens</span></td>\r\n\t\t\t\t\t\t<!-- <td><span data-prefix>$</span><span contenteditable id=\"order_item_sale_price_19\">4.0</span></td>\r\n\t\t\t\t\t\t<td><span contenteditable id=\"order_item_discount_percentage_19\">0.0</span></td>\r\n\t\t\t\t\t\t<td><span data-prefix></span><span id=\"cgst19\">0</span>(<span contenteditable>0.0</span>%)</td>\r\n\t\t\t\t\t\t<td><span data-prefix></span><span id=\"sgst19\">0</span>(<span contenteditable>0.0</span>%)</td>\r\n\t\t\t\t\t\t<td><span data-prefix>$</span><span></span></td> -->\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<td hidden=\"\" id=\"order_item_id_20\">20</td>\r\n\t\t\t\t\t\t<td><!-- <a class=\"cut\">- -->SF ITEM 1<br><span contenteditable=\"\"></span></td>\r\n\t\t\t\t\t\t<td><span contenteditable=\"\">NA</span></td>\r\n\t\t\t\t\t\t<td><span contenteditable=\"\" id=\"order_item_qty_20\">12.0</span></td>\r\n\t\t\t\t\t\t<td><span id=\"order_item_unit_20\" onclick=\"convertUnit('3', ['order_item_qty_20'], this, ['order_item_sale_price_20'])\">pcs</span></td>\r\n\t\t\t\t\t\t<!-- <td><span data-prefix>$</span><span contenteditable id=\"order_item_sale_price_20\">0.0</span></td>\r\n\t\t\t\t\t\t<td><span contenteditable id=\"order_item_discount_percentage_20\">0.0</span></td>\r\n\t\t\t\t\t\t<td><span data-prefix></span><span id=\"cgst20\">0</span>(<span contenteditable>0.0</span>%)</td>\r\n\t\t\t\t\t\t<td><span data-prefix></span><span id=\"sgst20\">0</span>(<span contenteditable>0.0</span>%)</td>\r\n\t\t\t\t\t\t<td><span data-prefix>$</span><span></span></td> -->\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\t\t\t<!-- <a class=\"add\">+</a> -->\r\n\t\t\t<address contenteditable=\"\" style=\"border-width: 0\" id=\"bank_details\">\r\n\t\t\t\t<p>Total in Words:</p>\r\n\t\t\t\t<p>Bank Acc. Details:</p>\r\n\r\n\t\t\t</address>\r\n\t\t\t<table class=\"balance\">\r\n\t\t\t\t<tbody><tr>\r\n\t\t\t\t\t<th><span contenteditable=\"\" id=\"total_amount\">Total</span></th>\r\n\t\t\t\t\t<td><span data-prefix=\"\">$</span><span>600.00</span></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th><span contenteditable=\"\">Amount Paid</span></th>\r\n\t\t\t\t\t<td><span data-prefix=\"\">$</span><span contenteditable=\"\">0.00</span></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th><span contenteditable=\"\">Balance Due</span></th>\r\n\t\t\t\t\t<td><span data-prefix=\"\">$</span><span>600.00</span></td>\r\n\t\t\t\t</tr>\r\n\t\t\t</tbody></table>\r\n\t\t\t<table id=\"categoryTotalsTable\">\r\n\t\t        <thead>\r\n\t\t            <tr>\r\n\t\t                <th>HSN/SAC</th>\r\n\t\t                <th>Taxable Amount</th>\r\n\t\t                <th>CGST</th>\r\n\t\t                <th>SGST</th>\r\n\t\t                <th>Total Tax Amount</th>\r\n\t\t            </tr>\r\n\t\t        </thead>\r\n\t\t        <tbody>\r\n\t\t            <!-- Category-wise totals will be displayed here using JavaScript -->\r\n\t\t        </tbody>\r\n\t\t    </table>\r\n\t\t</article>\r\n\t\t<aside>\r\n\t\t\t<h1><span contenteditable=\"\">Terms and Conditions</span></h1>\r\n\t\t\t<div contenteditable=\"\" id=\"terms\">\r\n\t\t\t\t<p>A finance charge of 1.5% will be made on unpaid balances after 30 days.</p>\r\n\t\t\t</div>\r\n\t\t</aside>\r\n\t</form>\r\n\t\r\n\r\n<script type=\"text/javascript\">\r\nlet button = document.getElementById(\"generate-pdf\");\r\nlet makepdf = document.getElementById(\"pdf-content\");\r\n\r\nbutton.addEventListener(\"click\", function () {\r\n  html2pdf()\r\n    .from(makepdf)\r\n    .set({\r\n      margin: [10, 0, 10, 0], // Set margins in millimeters (top, right, bottom, left)\r\n    })\r\n    .outputPdf('datauristring')\r\n    .then(function (pdfDataUri) {\r\n      // Open a new window with the PDF content\r\n      const newWindow = window.open('', '_blank');\r\n      newWindow.document.write('<embed width=\"100%\" height=\"100%\" src=\"' + pdfDataUri + '\">');\r\n      newWindow.document.close();\r\n    });\r\n});\r\nfunction saveInvoice(){\r\n\tdocument.getElementById(\"invoice_number_input\").value = document.getElementById(\"invoice_number\").innerHTML;\r\n\tdocument.getElementById(\"invoice_html_input\").value = document.documentElement.outerHTML;\r\n\tdocument.getElementById(\"save_invoice_form\").submit();\r\n}\r\n</script><div id=\"torrent-scanner-popup\" style=\"display: none;\"></div><webchatgpt-custom-element-886c9074-3c0b-443e-8b1b-b28417232ff8 id=\"webchatgpt-snackbar\" style=\"color: rgb(255, 255, 255);\"></webchatgpt-custom-element-886c9074-3c0b-443e-8b1b-b28417232ff8></body><grammarly-desktop-integration data-grammarly-shadow-root=\"true\"></grammarly-desktop-integration></html>",
                        "invoice_class": "delivery-slip"
                    },
                    {
                        "order_id": 21,
                        "data_id": 1,
                        "invoice_date": "2023-11-25",
                        "invoice_type": "intra-state",
                        "invoice_amount": 0.0,
                        "invoice_tax_amount": 0.0,
                        "id": 37,
                        "invoice_number": "SALES/5",
                        "invoice_html": "<html><head><style>article,aside,details,figcaption,figure,footer,header,hgroup,nav,section{display:block}audio[controls],canvas,video{display:inline-block}[hidden],audio{display:none}mark{background:#FF0;color:#000}</style><style>article,aside,details,figcaption,figure,footer,header,hgroup,nav,section{display:block}audio[controls],canvas,video{display:inline-block}[hidden],audio{display:none}mark{background:#FF0;color:#000}</style>\r\n\t\t<meta charset=\"utf-8\">\r\n\t\t<title>SALES INVOICE</title>\r\n\t\t<link rel=\"stylesheet\" href=\"/static/invoices/invoice_style.css\">\r\n\t\t<link rel=\"license\" href=\"https://www.opensource.org/licenses/mit-license/\">\r\n\t\t<script src=\"/static/invoices/invoice_script.js\"></script>\r\n\t\t<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.2/jspdf.min.js\"></script>\r\n\t\t<script src=\"https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.js\">\r\n    </script>\r\n\r\n\t</head>\r\n\t<body id=\"pdf-content\" data-new-gr-c-s-check-loaded=\"14.1141.0\" data-gr-ext-installed=\"\" data-new-gr-c-s-loaded=\"14.1141.0\">\r\n\t<script>\r\n    function convertUnit(itemId, quantityElementids, unitElement, rateElementids=[]) {\r\n        var url = '/units_relation_api?item_ids[]=' + itemId;\r\n\r\n        fetch(url)\r\n            .then(function(response) {\r\n                return response.json();\r\n            })\r\n            .then(function(data) {\r\n                var unitList = data[itemId];\r\n                var currentUnit = unitElement.textContent;\r\n\r\n                length_unitList = Object.keys(unitList).length;\r\n                // console.log(length_unitList);\r\n                if (length_unitList === 1) {\r\n                    // Handle the case when there is only one unit defined\r\n                    console.log('Only one unit is defined for this item.');\r\n                    return;\r\n                }\r\n\r\n                var currentConversionFactor = 1;\r\n\r\n                // Find the current unit's conversion factor\r\n                if (unitList[currentUnit]) {\r\n                    currentConversionFactor = parseFloat(unitList[currentUnit]);\r\n                }\r\n\r\n                // Find the index of the current unit\r\n                var currentIndex = -1;\r\n                for (var i = 0; i < length_unitList; i++) {\r\n                    if (Object.keys(unitList)[i] === currentUnit) {\r\n                        currentIndex = i;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                // Cycle to the next unit\r\n                var nextUnitIndex = (currentIndex + 1) % length_unitList;\r\n                var nextUnit = Object.keys(unitList)[nextUnitIndex];\r\n                var nextConversionFactor = parseFloat(unitList[nextUnit]);\r\n                // Update the UI\r\n                unitElement.textContent = nextUnit;\r\n                unitElement.value = nextUnit;\r\n                for(var i = 0; i <quantityElementids.length; i++){\r\n\r\n                    quantityElement = document.getElementById(quantityElementids[i]);\r\n                    // Update the quantity by multiplying with the conversion factor\r\n                    var currentQuantity = parseFloat(quantityElement.textContent);\r\n                    var currentQuantityValue = parseFloat(quantityElement.value);\r\n                    var newQuantity = currentQuantity * (nextConversionFactor / currentConversionFactor);\r\n                    var newQuantityValue = currentQuantityValue * (nextConversionFactor / currentConversionFactor);\r\n\r\n                    \r\n                    quantityElement.textContent = newQuantity.toFixed(3);\r\n                    quantityElement.value = newQuantityValue.toFixed(3);\r\n                    quantityElement.setAttribute(\"data-parent\", newQuantityValue.toFixed(2))\r\n                    quantityElement.setAttribute(\"data-child\", newQuantityValue.toFixed(2))\r\n                }\r\n                for(var i = 0; i <rateElementids.length; i++){\r\n\r\n                    quantityElement = document.getElementById(rateElementids[i]);\r\n                    // Update the quantity by multiplying with the conversion factor\r\n                    var currentQuantity = parseFloat(quantityElement.textContent);\r\n                    var currentQuantityValue = parseFloat(quantityElement.value);\r\n                    var newQuantity = currentQuantity / (nextConversionFactor / currentConversionFactor);\r\n                    var newQuantityValue = currentQuantityValue / (nextConversionFactor / currentConversionFactor);\r\n\r\n                    \r\n                    quantityElement.textContent = newQuantity.toFixed(3);\r\n                    quantityElement.value = newQuantityValue.toFixed(3);\r\n                    quantityElement.setAttribute(\"data-parent\", newQuantityValue.toFixed(2))\r\n                    quantityElement.setAttribute(\"data-child\", newQuantityValue.toFixed(2))\r\n                }\r\n            })\r\n            .catch(function(error) {\r\n                console.error('Error fetching unit conversion data:', error);\r\n            });\r\n    }\r\n\r\n</script>\r\n\t<form action=\"/save_invoice\" method=\"post\" id=\"save_invoice_form\">\r\n\t\t<input type=\"hidden\" name=\"invoice_id\" value=\"37\">\r\n\t\t<input type=\"hidden\" name=\"invoice_html\" id=\"invoice_html_input\" value=\"\">\r\n\t\t<input type=\"hidden\" name=\"invoice_number\" id=\"invoice_number_input\" value=\"SALES/5\">\r\n\t    <div>\r\n\t\t    <button type=\"button\" onclick=\"saveInvoice()\">Save</button>    \t\r\n\t\t    <button type=\"button\" id=\"generate-pdf\">Generate PDF</button>\r\n\t\t    <button type=\"button\" onclick=\"location.href='/invoices?order_id=21&amp;action=generate&amp;invoice_class=sales-invoice&amp;invoice_file=sales_invoice'\">GENERATE NEW INVOICE</button>\r\n\t    </div>\r\n\t\t<header>\r\n\t\t\t<h1>SALES INVOICE</h1>\r\n\t\t\t<address contenteditable=\"\" id=\"company_details\">\r\n\t\t\t\t<p style=\"font-weight: bold\">Arotatvika</p>\r\n\t\t\t\t<p>B-9, Opp. Meera Hospital</p>\r\n\t\t\t\t<p>Shiv Marg, Bani Park</p>\r\n\t\t\t\t<p>Jaipur Rajasthan 302016</p>\r\n\t\t\t\t<p>India</p>\r\n\t\t\t\t<p>GSTIN: 08CSYPA3170K1ZA</p>\r\n\t\t\t</address>\r\n\t\t\t<span><img alt=\"\" src=\"\"><input type=\"file\" accept=\"image/*\"></span>\r\n\t\t\t<table class=\"meta\">\r\n\t\t\t\t<tbody><tr>\r\n\t\t\t\t\t<th><span contenteditable=\"\">Invoice #</span></th>\r\n\t\t\t\t\t<td><span contenteditable=\"\" id=\"invoice_number\">SALES/5</span></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th><span contenteditable=\"\">Date</span></th>\r\n\t\t\t\t\t<td><span id=\"invoice_date\">2023-11-25</span></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th><span contenteditable=\"\">Amount Due</span></th>\r\n\t\t\t\t\t<td><span id=\"prefix\" contenteditable=\"\">Rs.</span><span id=\"\">175.44</span></td>\r\n\t\t\t\t</tr>\r\n\t\t\t</tbody></table>\r\n\t\t</header>\r\n\t\t<article>\r\n\t\t\t\r\n\t\t\t<div>\r\n\t\t\t\t<address contenteditable=\"\" id=\"billing_details\">\r\n\t\t\t\t\t<span style=\"font-weight: bold\">BILL TO: RAQGEN SOLUTIONS PRIVATE LIMITED</span>\r\n\t\t\t\t\t<p style=\"white-space: pre-wrap;\">10 / 20 , fateh kunj, Vidhyadhar Nagar</p>\r\n\t\t\t\t\t<p>GSTIN: </p>\r\n\t\t\t\t</address>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<address contenteditable=\"\" id=\"shipping_details\">\r\n\t\t\t\t\t<span style=\"font-weight: bold\">SHIP TO: RAQGEN SOLUTIONS PRIVATE LIMITED</span>\r\n\t\t\t\t\t<p style=\"white-space: pre-wrap;\">10 / 20 , fateh kunj, Vidhyadhar Nagar</p>\r\n\t\t\t\t\t<p>GSTIN: </p>\r\n\t\t\t\t</address>\r\n\t\t\t</div>\r\n\t\t</article>\r\n\t\t<article>\r\n\t\t\t<table class=\"inventory\">\r\n\t\t\t\t<thead>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">Item</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">HSN/SAC</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">Quantity</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">Unit</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">Rate</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">Discount %</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">CGST</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">SGST</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">Amount</span></th>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</thead>\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<td hidden=\"\" id=\"order_item_id_20\">20</td>\r\n\t\t\t\t\t\t<td><!-- <a class=\"cut\">- -->SF ITEM 1<br><span contenteditable=\"\"></span></td>\r\n\t\t\t\t\t\t<td><span contenteditable=\"\">NA</span></td>\r\n\t\t\t\t\t\t<td><span id=\"order_item_qty_20\">12.0</span></td>\r\n\t\t\t\t\t\t<td><span id=\"order_item_unit_20\" onclick=\"convertUnit('3', ['order_item_qty_20'], this, ['order_item_sale_price_20'])\">pcs</span></td>\r\n\t\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span id=\"order_item_sale_price_20\">10.0</span></td>\r\n\t\t\t\t\t\t<td><span id=\"order_item_discount_percentage_20\">0.0</span></td>\r\n\t\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span id=\"cgst20\">0.00</span> ( <span>0.0</span>% )</td>\r\n\t\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span id=\"sgst20\">0.00</span> ( <span>0.0</span>% )</td>\r\n\t\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span>120</span></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<td hidden=\"\" id=\"order_item_id_19\">19</td>\r\n\t\t\t\t\t\t<td><!-- <a class=\"cut\">- -->FG Item 1<br><span contenteditable=\"\">(carton&nbsp; of 25dz)</span></td>\r\n\t\t\t\t\t\t<td><span contenteditable=\"\">ABC</span></td>\r\n\t\t\t\t\t\t<td><span id=\"order_item_qty_19\" data-parent=\"NaN\" data-child=\"NaN\">168.000</span></td>\r\n\t\t\t\t\t\t<td><span id=\"order_item_unit_19\" onclick=\"convertUnit('2', ['order_item_qty_19'], this, ['order_item_sale_price_19'])\">pcs</span></td>\r\n\t\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span id=\"order_item_sale_price_19\" data-parent=\"NaN\" data-child=\"NaN\">0.333</span></td>\r\n\t\t\t\t\t\t<td><span id=\"order_item_discount_percentage_19\">0.0</span></td>\r\n\t\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span id=\"cgst19\">0.00</span> ( <span>0.0</span>% )</td>\r\n\t\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span id=\"sgst19\">0.00</span> ( <span>0.0</span>% )</td>\r\n\t\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span>55.44</span></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\t\t\t<!-- <a class=\"add\">+</a> -->\r\n\t\t\t<address contenteditable=\"\" style=\"border-width: 0\" id=\"bank_details\">\r\n\t\t\t\t<p>Total in Words:</p>\r\n\t\t\t\t<p>Bank Acc. Details:</p>\r\n\r\n\t\t\t</address>\r\n\t\t\t<table class=\"balance\">\r\n\t\t\t\t<tbody><tr>\r\n\t\t\t\t\t<th><span contenteditable=\"\" id=\"total_amount\">Total</span></th>\r\n\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span>175.44</span></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th><span contenteditable=\"\">Amount Paid</span></th>\r\n\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span contenteditable=\"\">0.00</span></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th><span contenteditable=\"\">Balance Due</span></th>\r\n\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span>175.44</span></td>\r\n\t\t\t\t</tr>\r\n\t\t\t</tbody></table>\r\n\t\t\t<table id=\"categoryTotalsTable\">\r\n\t\t        <thead>\r\n\t\t            <tr>\r\n\t\t                <th>HSN/SAC</th>\r\n\t\t                <th>Taxable Amount</th>\r\n\t\t                <th>CGST</th>\r\n\t\t                <th>SGST</th>\r\n\t\t                <th>Total Tax Amount</th>\r\n\t\t            </tr>\r\n\t\t        </thead>\r\n\t\t        <tbody><tr><td>NA</td><td>120</td><td>0 (0%)</td><td>0 (0%)</td><td>0</td></tr><tr><td>ABC</td><td>55.44</td><td>0 (0%)</td><td>0 (0%)</td><td>0</td></tr><tr><td><strong>Total<strong></strong></strong></td><td>175.44</td><td>0</td><td>0</td><td>0</td></tr></tbody>\r\n\t\t    </table>\r\n\t\t</article>\r\n\t\t<aside>\r\n\t\t\t<h1><span contenteditable=\"\">Terms and Conditions</span></h1>\r\n\t\t\t<div contenteditable=\"\" id=\"terms\">\r\n\t\t\t\t<p>A finance charge of 1.5% will be made on unpaid balances after 30 days.</p>\r\n\t\t\t</div>\r\n\t\t</aside>\r\n\t</form>\r\n\t\r\n\r\n<script type=\"text/javascript\">\r\nlet button = document.getElementById(\"generate-pdf\");\r\nlet makepdf = document.getElementById(\"pdf-content\");\r\n\r\nbutton.addEventListener(\"click\", function () {\r\n  html2pdf()\r\n    .from(makepdf)\r\n    .set({\r\n      margin: [10, 0, 10, 0], // Set margins in millimeters (top, right, bottom, left)\r\n    })\r\n    .outputPdf('datauristring')\r\n    .then(function (pdfDataUri) {\r\n      // Open a new window with the PDF content\r\n      const newWindow = window.open('', '_blank');\r\n      newWindow.document.write('<embed width=\"100%\" height=\"100%\" src=\"' + pdfDataUri + '\">');\r\n      newWindow.document.close();\r\n    });\r\n});\r\nfunction saveInvoice(){\r\n\tdocument.getElementById(\"invoice_number_input\").value = document.getElementById(\"invoice_number\").innerHTML;\r\n\tdocument.getElementById(\"invoice_html_input\").value = document.documentElement.outerHTML;\r\n\tdocument.getElementById(\"save_invoice_form\").submit();\r\n}\r\n</script><div id=\"torrent-scanner-popup\" style=\"display: none;\"></div><webchatgpt-custom-element-19f0908e-22ff-4611-bcbc-7969f2b1b87b id=\"webchatgpt-snackbar\" style=\"color: rgb(255, 255, 255);\"></webchatgpt-custom-element-19f0908e-22ff-4611-bcbc-7969f2b1b87b><grammarly-desktop-integration data-grammarly-shadow-root=\"true\"></grammarly-desktop-integration><div id=\"torrent-scanner-popup\" style=\"display: none;\"></div><webchatgpt-custom-element-48dc6d36-e807-4250-a73b-f5d0646a844f id=\"webchatgpt-snackbar\" style=\"color: rgb(255, 255, 255);\"></webchatgpt-custom-element-48dc6d36-e807-4250-a73b-f5d0646a844f></body></html>",
                        "invoice_class": "sales-invoice"
                    },
                    {
                        "order_id": 21,
                        "data_id": 1,
                        "invoice_date": "2023-11-30",
                        "invoice_type": "intra-state",
                        "invoice_amount": 0.0,
                        "invoice_tax_amount": 0.0,
                        "id": 197,
                        "invoice_number": "DELIVERY/29",
                        "invoice_html": "",
                        "invoice_class": "delivery-slip"
                    }
                ]
            },
            "customer": {
                "id": 1,
                "shipping_address": "10 / 20 , fateh kunj, Vidhyadhar Nagar\r\n\t\t  \t\t\t\t\r\n\t\t  \t\t\t\t",
                "email": "iitkgp.vedant@gmail.com",
                "data_id": 1,
                "lead_time": null,
                "name": "RAQGEN SOLUTIONS PRIVATE LIMITED",
                "billing_address": "10 / 20 , fateh kunj, Vidhyadhar Nagar\r\n\t\t  \t\t\t\t\r\n\t\t  \t\t\t\t",
                "gst": "AA",
                "phone": "+918875750551",
                "regdate": "2023-11-18"
            },
            "items": [
                {
                    "dispatch_qty": 11.0,
                    "item_id": 2,
                    "order_qty": 16.0,
                    "delivery_batch_id": 17,
                    "item_unit": "dozens",
                    "order_item_id": 19,
                    "id": 2,
                    "item_name": "FG Item 1 bs",
                    "unit": "dozend",
                    "balance_qty": 5.0
                },
                {
                    "dispatch_qty": 15.0,
                    "item_id": 3,
                    "order_qty": 12.0,
                    "delivery_batch_id": 17,
                    "item_unit": "pcs",
                    "order_item_id": 20,
                    "id": 3,
                    "item_name": "Sabka Product",
                    "unit": "pcs",
                    "balance_qty": -3.0
                },
                {
                    "dispatch_qty": 0.0,
                    "item_id": 2,
                    "order_qty": 5.0,
                    "delivery_batch_id": 17,
                    "item_unit": "dozens",
                    "order_item_id": 47,
                    "id": 2,
                    "item_name": "FG Item 1 bs",
                    "unit": "dozend",
                    "balance_qty": 5.0
                }
            ],
            "chart_items": [
                [
                    19,
                    "FG Item 1 bs",
                    16.0,
                    "dozens",
                    11.0,
                    2
                ],
                [
                    20,
                    "Sabka Product",
                    12.0,
                    "pcs",
                    15.0,
                    3
                ],
                [
                    47,
                    "FG Item 1 bs",
                    5.0,
                    "dozens",
                    0.0,
                    2
                ]
            ],
            "orderitemdispatch": []
        }
    },
    "order_data_df": [
        {
            "dispatch_qty": 11.0,
            "item_id": 2,
            "order_qty": 16.0,
            "delivery_batch_id": 17,
            "item_unit": "dozens",
            "order_item_id": 19,
            "id": 2,
            "item_name": "FG Item 1 bs",
            "unit": "dozend",
            "balance_qty": 5.0
        },
        {
            "dispatch_qty": 15.0,
            "item_id": 3,
            "order_qty": 12.0,
            "delivery_batch_id": 17,
            "item_unit": "pcs",
            "order_item_id": 20,
            "id": 3,
            "item_name": "Sabka Product",
            "unit": "pcs",
            "balance_qty": -3.0
        },
        {
            "dispatch_qty": 0.0,
            "item_id": 2,
            "order_qty": 5.0,
            "delivery_batch_id": 17,
            "item_unit": "dozens",
            "order_item_id": 47,
            "id": 2,
            "item_name": "FG Item 1 bs",
            "unit": "dozend",
            "balance_qty": 5.0
        }
    ],
    "DATA": {
        "order_info": {
            "customer_id": 1,
            "regdate": "2023-11-23",
            "despdate": "2023-11-30",
            "note": "hello world!",
            "data_id": 1,
            "actual_desp_date": "2023-11-30",
            "id": 21,
            "status": "Dispatched",
            "order_type": 0,
            "active_date": "2023-11-23",
            "deliverybatches": [
                {
                    "id": 29,
                    "despdate": "2024-06-04",
                    "status": "STORE",
                    "invoice_id": 197,
                    "order_id": 21,
                    "batch_name": "sarth",
                    "actual_desp_date": "2024-06-06",
                    "data_id": 1,
                    "orderitemdispatch": [
                        {
                            "id": 63,
                            "dispatch_qty": 0.0,
                            "inventory_ledger_id": null,
                            "delivery_batch_id": 29,
                            "order_item_id": 19,
                            "data_id": 1
                        },
                        {
                            "id": 64,
                            "dispatch_qty": 0.0,
                            "inventory_ledger_id": null,
                            "delivery_batch_id": 29,
                            "order_item_id": 20,
                            "data_id": 1
                        },
                        {
                            "id": 65,
                            "dispatch_qty": 0.0,
                            "inventory_ledger_id": null,
                            "delivery_batch_id": 29,
                            "order_item_id": 47,
                            "data_id": 1
                        }
                    ]
                },
                {
                    "id": 17,
                    "despdate": "2023-11-30",
                    "status": "DISPATCHED",
                    "invoice_id": null,
                    "order_id": 21,
                    "batch_name": "auto_batch",
                    "actual_desp_date": "2024-06-06",
                    "data_id": 1,
                    "orderitemdispatch": [
                        {
                            "id": 36,
                            "dispatch_qty": 11.0,
                            "inventory_ledger_id": null,
                            "delivery_batch_id": 17,
                            "order_item_id": 19,
                            "data_id": 1
                        },
                        {
                            "id": 37,
                            "dispatch_qty": 15.0,
                            "inventory_ledger_id": null,
                            "delivery_batch_id": 17,
                            "order_item_id": 20,
                            "data_id": 1
                        },
                        {
                            "id": 38,
                            "dispatch_qty": 0.0,
                            "inventory_ledger_id": null,
                            "delivery_batch_id": 17,
                            "order_item_id": 47,
                            "data_id": 1
                        }
                    ]
                }
            ],
            "invoice": [
                {
                    "order_id": 21,
                    "data_id": 1,
                    "invoice_date": "2024-01-11",
                    "invoice_type": "intra-state",
                    "invoice_amount": 0.0,
                    "invoice_tax_amount": 0.0,
                    "id": 61,
                    "invoice_number": "SALES/11",
                    "invoice_html": "\n<html>\n\t<head>\n\t\t<meta charset=\"utf-8\">\n\t\t<title>SALES INVOICE</title>\n\t\t<link rel=\"stylesheet\" href=\"/static/invoices/invoice_style.css\">\n\t\t<link rel=\"license\" href=\"https://www.opensource.org/licenses/mit-license/\">\n\t\t<script src=\"/static/invoices/invoice_script.js\"></script>\n\t\t<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.2/jspdf.min.js\"></script>\n\t\t<script src=\n\"https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.js\">\n    </script>\n\n\t</head>\n\t<body id=\"pdf-content\">\n\t<script>\n    function convertUnit(itemId, quantityElementids, unitElement, rateElementids=[]) {\n        var url = '/units_relation_api?item_ids[]=' + itemId;\n\n        fetch(url)\n            .then(function(response) {\n                return response.json();\n            })\n            .then(function(data) {\n                var unitList = data[itemId];\n                var currentUnit = unitElement.textContent;\n\n                length_unitList = Object.keys(unitList).length;\n                // console.log(length_unitList);\n                if (length_unitList === 1) {\n                    // Handle the case when there is only one unit defined\n                    console.log('Only one unit is defined for this item.');\n                    return;\n                }\n\n                var currentConversionFactor = 1;\n\n                // Find the current unit's conversion factor\n                if (unitList[currentUnit]) {\n                    currentConversionFactor = parseFloat(unitList[currentUnit]);\n                }\n\n                // Find the index of the current unit\n                var currentIndex = -1;\n                for (var i = 0; i < length_unitList; i++) {\n                    if (Object.keys(unitList)[i] === currentUnit) {\n                        currentIndex = i;\n                        break;\n                    }\n                }\n\n                // Cycle to the next unit\n                var nextUnitIndex = (currentIndex + 1) % length_unitList;\n                var nextUnit = Object.keys(unitList)[nextUnitIndex];\n                var nextConversionFactor = parseFloat(unitList[nextUnit]);\n                // Update the UI\n                unitElement.textContent = nextUnit;\n                unitElement.value = nextUnit;\n                for(var i = 0; i <quantityElementids.length; i++){\n\n                    quantityElement = document.getElementById(quantityElementids[i]);\n                    // Update the quantity by multiplying with the conversion factor\n                    var currentQuantity = parseFloat(quantityElement.textContent);\n                    var currentQuantityValue = parseFloat(quantityElement.value);\n                    var newQuantity = currentQuantity * (nextConversionFactor / currentConversionFactor);\n                    var newQuantityValue = currentQuantityValue * (nextConversionFactor / currentConversionFactor);\n\n                    \n                    quantityElement.textContent = newQuantity.toFixed(3);\n                    quantityElement.value = newQuantityValue.toFixed(3);\n                    quantityElement.setAttribute(\"data-parent\", newQuantityValue.toFixed(2))\n                    quantityElement.setAttribute(\"data-child\", newQuantityValue.toFixed(2))\n                }\n                for(var i = 0; i <rateElementids.length; i++){\n\n                    quantityElement = document.getElementById(rateElementids[i]);\n                    // Update the quantity by multiplying with the conversion factor\n                    var currentQuantity = parseFloat(quantityElement.textContent);\n                    var currentQuantityValue = parseFloat(quantityElement.value);\n                    var newQuantity = currentQuantity / (nextConversionFactor / currentConversionFactor);\n                    var newQuantityValue = currentQuantityValue / (nextConversionFactor / currentConversionFactor);\n\n                    \n                    quantityElement.textContent = newQuantity.toFixed(3);\n                    quantityElement.value = newQuantityValue.toFixed(3);\n                    quantityElement.setAttribute(\"data-parent\", newQuantityValue.toFixed(2))\n                    quantityElement.setAttribute(\"data-child\", newQuantityValue.toFixed(2))\n                }\n            })\n            .catch(function(error) {\n                console.error('Error fetching unit conversion data:', error);\n            });\n    }\n\n</script>\n\t<form action=\"/save_invoice\" method=\"post\" id=\"save_invoice_form\">\n\t\t<input type=\"hidden\" name=\"invoice_id\" value=\"61\">\n\t\t<input type=\"hidden\" name=\"invoice_html\" id=\"invoice_html_input\" value=\"\">\n\t\t<input type=\"hidden\" name=\"invoice_number\" id=\"invoice_number_input\" value=\"\">\n\t    <div>\n\t\t    <button type=\"button\" onclick=\"saveInvoice()\">Save</button>    \t\n\t\t    <button type=\"button\" id=\"generate-pdf\" >Generate PDF</button>\n\t\t    <button type=\"button\" onclick=\"location.href='/invoices?order_id=21&action=generate&invoice_class=sales-invoice&invoice_file=sales_invoice'\">GENERATE NEW INVOICE</button>\n\t    </div>\n\t\t<header>\n\t\t\t<h1>SALES INVOICE</h1>\n\t\t\t<address contenteditable id=\"company_details\">\n\t\t\t\t<p style=\"font-weight: bold\">VEDANT AGRAWAL_J3VU4NZYT5</p>\n\t\t\t\t<p></p>\n\t\t\t\t<p><strong>GSTIN:</strong></p>\n\t\t\t</address>\n\t\t\t<span><img alt=\"\" src=\"\"><input type=\"file\" accept=\"image/*\"></span>\n\t\t\t<table class=\"meta\">\n\t\t\t\t<tr>\n\t\t\t\t\t<th><span contenteditable>Invoice #</span></th>\n\t\t\t\t\t<td><span contenteditable id=\"invoice_number\">SALES/11</span></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th><span contenteditable>Date</span></th>\n\t\t\t\t\t<td><span id=\"invoice_date\">2024-01-11</span></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th><span contenteditable>Amount Due</span></th>\n\t\t\t\t\t<td><span id=\"prefix\" contenteditable>Rs.</span><span id=\"\">600.00</span></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</header>\n\t\t<article>\n\t\t\t\n\t\t\t<div>\n\t\t\t\t<address contenteditable id=\"billing_details\">\n\t\t\t\t\t<span style=\"font-weight: bold\">BILL TO: RAQGEN SOLUTIONS PRIVATE LIMITED</span>\n\t\t\t\t\t<p style=\"white-space: pre-wrap;\">10 / 20 , fateh kunj, Vidhyadhar Nagar</p>\n\t\t\t\t\t<p>GSTIN: </p>\n\t\t\t\t</address>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<address contenteditable id=\"shipping_details\">\n\t\t\t\t\t<span style=\"font-weight: bold\">SHIP TO: RAQGEN SOLUTIONS PRIVATE LIMITED</span>\n\t\t\t\t\t<p style=\"white-space: pre-wrap;\">10 / 20 , fateh kunj, Vidhyadhar Nagar</p>\n\t\t\t\t\t<p>GSTIN: </p>\n\t\t\t\t</address>\n\t\t\t</div>\n\t\t</article>\n\t\t<article>\n\t\t\t<table class=\"inventory\">\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th><span contenteditable>Item</span></th>\n\t\t\t\t\t\t<th><span contenteditable>HSN/SAC</span></th>\n\t\t\t\t\t\t<th><span contenteditable>Quantity</span></th>\n\t\t\t\t\t\t<th><span contenteditable>Unit</span></th>\n\t\t\t\t\t\t<th><span contenteditable>Rate</span></th>\n\t\t\t\t\t\t<th><span contenteditable>Discount %</span></th>\n\t\t\t\t\t\t<th><span contenteditable>CGST</span></th>\n\t\t\t\t\t\t<th><span contenteditable>SGST</span></th>\n\t\t\t\t\t\t<th><span contenteditable>Amount</span></th>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t\t<!-- <a class=\"add\">+</a> -->\n\t\t\t<address contenteditable style=\"border-width: 0\" id=\"bank_details\">\n\t\t\t\t<p>Total in Words:</p>\n\t\t\t\t<p>Bank Acc. Details:</p>\n\n\t\t\t</address>\n\t\t\t<table class=\"balance\">\n\t\t\t\t<tr>\n\t\t\t\t\t<th><span contenteditable >Total</span></th>\n\t\t\t\t\t<td><span data-prefix>$</span><span id=\"total_amount\">600.00</span></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th><span contenteditable>Amount Paid</span></th>\n\t\t\t\t\t<td><span data-prefix>$</span><span contenteditable>0.00</span></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th><span contenteditable>Balance Due</span></th>\n\t\t\t\t\t<td><span data-prefix>$</span><span>600.00</span></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t\t<table id=\"categoryTotalsTable\">\n\t\t        <thead>\n\t\t            <tr>\n\t\t                <th>HSN/SAC</th>\n\t\t                <th>Taxable Amount</th>\n\t\t                <th>CGST</th>\n\t\t                <th>SGST</th>\n\t\t                <th>Total Tax Amount</th>\n\t\t            </tr>\n\t\t        </thead>\n\t\t        <tbody>\n\t\t            <!-- Category-wise totals will be displayed here using JavaScript -->\n\t\t        </tbody>\n\t\t    </table>\n\t\t</article>\n\t\t<aside>\n\t\t\t<h1><span contenteditable>Terms and Conditions</span></h1>\n\t\t\t<div contenteditable id=\"terms\">\n\t\t\t\t<p>A finance charge of 1.5% will be made on unpaid balances after 30 days.</p>\n\t\t\t</div>\n\t\t</aside>\n\t</form>\n\t</body>\n</html>\n<script type=\"text/javascript\">\nlet button = document.getElementById(\"generate-pdf\");\nlet makepdf = document.getElementById(\"pdf-content\");\n\nbutton.addEventListener(\"click\", function () {\n  html2pdf()\n    .from(makepdf)\n    .set({\n      margin: [10, 0, 10, 0], // Set margins in millimeters (top, right, bottom, left)\n    })\n    .outputPdf('datauristring')\n    .then(function (pdfDataUri) {\n      // Open a new window with the PDF content\n      const newWindow = window.open('', '_blank');\n      newWindow.document.write('<embed width=\"100%\" height=\"100%\" src=\"' + pdfDataUri + '\">');\n      newWindow.document.close();\n    });\n});\nfunction saveInvoice(){\n\tdocument.getElementById(\"invoice_number_input\").value = document.getElementById(\"invoice_number\").innerHTML;\n\tdocument.getElementById(\"invoice_html_input\").value = document.documentElement.outerHTML;\n\tdocument.getElementById(\"save_invoice_form\").submit();\n}\n</script>",
                    "invoice_class": "sales-invoice"
                },
                {
                    "order_id": 21,
                    "data_id": 1,
                    "invoice_date": "2023-11-25",
                    "invoice_type": "intra-state",
                    "invoice_amount": 0.0,
                    "invoice_tax_amount": 0.0,
                    "id": 38,
                    "invoice_number": "PROFORMA/3",
                    "invoice_html": "<html><head><style>article,aside,details,figcaption,figure,footer,header,hgroup,nav,section{display:block}audio[controls],canvas,video{display:inline-block}[hidden],audio{display:none}mark{background:#FF0;color:#000}</style>\r\n\t\t<meta charset=\"utf-8\">\r\n\t\t<title>PROFORMA INVOICE</title>\r\n\t\t<link rel=\"stylesheet\" href=\"/static/invoices/invoice_style.css\">\r\n\t\t<link rel=\"license\" href=\"https://www.opensource.org/licenses/mit-license/\">\r\n\t\t<script src=\"/static/invoices/invoice_script.js\"></script>\r\n\t\t<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.2/jspdf.min.js\"></script>\r\n\t\t<script src=\"https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.js\">\r\n    </script>\r\n\t</head>\r\n\t<body id=\"pdf-content\" data-new-gr-c-s-check-loaded=\"14.1141.0\" data-gr-ext-installed=\"\" data-new-gr-c-s-loaded=\"14.1141.0\">\r\n\t<script>\r\n    function convertUnit(itemId, quantityElementids, unitElement, rateElementids=[]) {\r\n        var url = '/units_relation_api?item_ids[]=' + itemId;\r\n\r\n        fetch(url)\r\n            .then(function(response) {\r\n                return response.json();\r\n            })\r\n            .then(function(data) {\r\n                var unitList = data[itemId];\r\n                var currentUnit = unitElement.textContent;\r\n\r\n                length_unitList = Object.keys(unitList).length;\r\n                // console.log(length_unitList);\r\n                if (length_unitList === 1) {\r\n                    // Handle the case when there is only one unit defined\r\n                    console.log('Only one unit is defined for this item.');\r\n                    return;\r\n                }\r\n\r\n                var currentConversionFactor = 1;\r\n\r\n                // Find the current unit's conversion factor\r\n                if (unitList[currentUnit]) {\r\n                    currentConversionFactor = parseFloat(unitList[currentUnit]);\r\n                }\r\n\r\n                // Find the index of the current unit\r\n                var currentIndex = -1;\r\n                for (var i = 0; i < length_unitList; i++) {\r\n                    if (Object.keys(unitList)[i] === currentUnit) {\r\n                        currentIndex = i;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                // Cycle to the next unit\r\n                var nextUnitIndex = (currentIndex + 1) % length_unitList;\r\n                var nextUnit = Object.keys(unitList)[nextUnitIndex];\r\n                var nextConversionFactor = parseFloat(unitList[nextUnit]);\r\n                // Update the UI\r\n                unitElement.textContent = nextUnit;\r\n                unitElement.value = nextUnit;\r\n                for(var i = 0; i <quantityElementids.length; i++){\r\n\r\n                    quantityElement = document.getElementById(quantityElementids[i]);\r\n                    // Update the quantity by multiplying with the conversion factor\r\n                    var currentQuantity = parseFloat(quantityElement.textContent);\r\n                    var currentQuantityValue = parseFloat(quantityElement.value);\r\n                    var newQuantity = currentQuantity * (nextConversionFactor / currentConversionFactor);\r\n                    var newQuantityValue = currentQuantityValue * (nextConversionFactor / currentConversionFactor);\r\n\r\n                    \r\n                    quantityElement.textContent = newQuantity.toFixed(3);\r\n                    quantityElement.value = newQuantityValue.toFixed(3);\r\n                    quantityElement.setAttribute(\"data-parent\", newQuantityValue.toFixed(2))\r\n                    quantityElement.setAttribute(\"data-child\", newQuantityValue.toFixed(2))\r\n                }\r\n                for(var i = 0; i <rateElementids.length; i++){\r\n\r\n                    quantityElement = document.getElementById(rateElementids[i]);\r\n                    // Update the quantity by multiplying with the conversion factor\r\n                    var currentQuantity = parseFloat(quantityElement.textContent);\r\n                    var currentQuantityValue = parseFloat(quantityElement.value);\r\n                    var newQuantity = currentQuantity / (nextConversionFactor / currentConversionFactor);\r\n                    var newQuantityValue = currentQuantityValue / (nextConversionFactor / currentConversionFactor);\r\n\r\n                    \r\n                    quantityElement.textContent = newQuantity.toFixed(3);\r\n                    quantityElement.value = newQuantityValue.toFixed(3);\r\n                    quantityElement.setAttribute(\"data-parent\", newQuantityValue.toFixed(2))\r\n                    quantityElement.setAttribute(\"data-child\", newQuantityValue.toFixed(2))\r\n                }\r\n            })\r\n            .catch(function(error) {\r\n                console.error('Error fetching unit conversion data:', error);\r\n            });\r\n    }\r\n\r\n</script>\r\n\t<form action=\"/save_invoice\" method=\"post\" id=\"save_invoice_form\">\r\n\t\t<input type=\"hidden\" name=\"invoice_id\" value=\"38\">\r\n\t\t<input type=\"hidden\" name=\"invoice_html\" id=\"invoice_html_input\" value=\"\">\r\n\t\t<input type=\"hidden\" name=\"invoice_number\" id=\"invoice_number_input\" value=\"PROFORMA/3\">\r\n\t    <div>\r\n\t\t    <button type=\"button\" onclick=\"saveInvoice()\">Save</button>    \t\r\n\t\t    <button type=\"button\" id=\"generate-pdf\">Generate PDF</button>\r\n\t\t    <button type=\"button\" onclick=\"location.href='/invoices?order_id=21&amp;action=generate&amp;invoice_class=proforma-invoice&amp;invoice_file=proforma_invoice'\">GENERATE NEW INVOICE</button>\r\n\t    </div>\r\n\t\t<header>\r\n\t\t\t<h1>PROFORMA Invoice</h1>\r\n\t\t\t<address contenteditable=\"\" id=\"company_details\">\r\n\t\t\t\t<p style=\"font-weight: bold\">Arotatvika</p>\r\n\t\t\t\t<p>B-9, Opp. Meera Hospital</p>\r\n\t\t\t\t<p>Shiv Marg, Bani Park</p>\r\n\t\t\t\t<p>Jaipur Rajasthan 302016</p>\r\n\t\t\t\t<p>India</p>\r\n\t\t\t\t<p>GSTIN: 08CSYPA3170K1ZA</p>\r\n\t\t\t</address>\r\n\t\t\t<span><img alt=\"\" src=\"\"><input type=\"file\" accept=\"image/*\"></span>\r\n\t\t\t<table class=\"meta\">\r\n\t\t\t\t<tbody><tr>\r\n\t\t\t\t\t<th><span contenteditable=\"\">Invoice #</span></th>\r\n\t\t\t\t\t<td><span contenteditable=\"\" id=\"invoice_number\">PROFORMA/3</span></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th><span contenteditable=\"\">Date</span></th>\r\n\t\t\t\t\t<td><span id=\"invoice_date\">2023-11-25</span></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th><span contenteditable=\"\">Amount Due</span></th>\r\n\t\t\t\t\t<td><span id=\"prefix\" contenteditable=\"\">Rs.</span><span id=\"\">184</span></td>\r\n\t\t\t\t</tr>\r\n\t\t\t</tbody></table>\r\n\t\t</header>\r\n\t\t<article>\r\n\t\t\t\r\n\t\t\t<div>\r\n\t\t\t\t<address contenteditable=\"\" id=\"billing_details\">\r\n\t\t\t\t\t<span style=\"font-weight: bold\">BILL TO: RAQGEN SOLUTIONS PRIVATE LIMITED</span>\r\n\t\t\t\t\t<p style=\"white-space: pre-wrap;\">10 / 20 , fateh kunj, Vidhyadhar Nagar</p>\r\n\t\t\t\t\t<p>GSTIN: </p>\r\n\t\t\t\t</address>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<address contenteditable=\"\" id=\"shipping_details\">\r\n\t\t\t\t\t<span style=\"font-weight: bold\">SHIP TO: RAQGEN SOLUTIONS PRIVATE LIMITED</span>\r\n\t\t\t\t\t<p style=\"white-space: pre-wrap;\">10 / 20 , fateh kunj, Vidhyadhar Nagar</p>\r\n\t\t\t\t\t<p>GSTIN: </p>\r\n\t\t\t\t</address>\r\n\t\t\t</div>\r\n\t\t</article>\r\n\t\t<article>\r\n\t\t\t<table class=\"inventory\">\r\n\t\t\t\t<thead>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">Item</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">HSN/SAC</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">Quantity</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">Unit</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">Rate</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">Discount %</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">CGST</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">SGST</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">Amount</span></th>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</thead>\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<td hidden=\"\" id=\"order_item_id_20\">20</td>\r\n\t\t\t\t\t\t<td><!-- <a class=\"cut\">- -->SF ITEM 1<br><span contenteditable=\"\"></span></td>\r\n\t\t\t\t\t\t<td><span contenteditable=\"\">NA</span></td>\r\n\t\t\t\t\t\t<td><span contenteditable=\"\" id=\"order_item_qty_20\">12.0</span></td>\r\n\t\t\t\t\t\t<td><span id=\"order_item_unit_20\" onclick=\"convertUnit('3', ['order_item_qty_20'], this, ['order_item_sale_price_20'])\">pcs</span></td>\r\n\t\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span contenteditable=\"\" id=\"order_item_sale_price_20\">10.0</span></td>\r\n\t\t\t\t\t\t<td><span contenteditable=\"\" id=\"order_item_discount_percentage_20\">0.0</span></td>\r\n\t\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span id=\"cgst20\">5.45</span>(<span contenteditable=\"\" id=\"cgst_percentage_20\">5</span>%)</td>\r\n\t\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span id=\"sgst20\">5.45</span>(<span contenteditable=\"\" id=\"sgst_percentage_20\">5</span>%)</td>\r\n\t\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span>120</span></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<td hidden=\"\" id=\"order_item_id_19\">19</td>\r\n\t\t\t\t\t\t<td><!-- <a class=\"cut\">- -->FG Item 1<br><span contenteditable=\"\"></span></td>\r\n\t\t\t\t\t\t<td><span contenteditable=\"\">ABC</span></td>\r\n\t\t\t\t\t\t<td><span contenteditable=\"\" id=\"order_item_qty_19\">16.0</span></td>\r\n\t\t\t\t\t\t<td><span id=\"order_item_unit_19\" onclick=\"convertUnit('2', ['order_item_qty_19'], this, ['order_item_sale_price_19'])\">dozens</span></td>\r\n\t\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span contenteditable=\"\" id=\"order_item_sale_price_19\">4.0</span></td>\r\n\t\t\t\t\t\t<td><span contenteditable=\"\" id=\"order_item_discount_percentage_19\">0.0</span></td>\r\n\t\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span id=\"cgst19\">2.91</span>(<span contenteditable=\"\" id=\"cgst_percentage_19\">5</span>%)</td>\r\n\t\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span id=\"sgst19\">2.91</span>(<span contenteditable=\"\" id=\"sgst_percentage_19\">5</span>%)</td>\r\n\t\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span>64</span></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\t\t\t<!-- <a class=\"add\">+</a> -->\r\n\t\t\t<address contenteditable=\"\" style=\"border-width: 0\" id=\"bank_details\">\r\n\t\t\t\t<p>Total in Words:</p>\r\n\t\t\t\t<p>Bank Acc. Details:</p>\r\n\r\n\t\t\t</address>\r\n\t\t\t<table class=\"balance\">\r\n\t\t\t\t<tbody><tr>\r\n\t\t\t\t\t<th><span contenteditable=\"\" id=\"total_amount\">Total</span></th>\r\n\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span>184</span></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th><span contenteditable=\"\">Amount Paid</span></th>\r\n\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span contenteditable=\"\">0.00</span></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th><span contenteditable=\"\">Balance Due</span></th>\r\n\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span>184</span></td>\r\n\t\t\t\t</tr>\r\n\t\t\t</tbody></table>\r\n\t\t\t<table id=\"categoryTotalsTable\">\r\n\t\t        <thead>\r\n\t\t            <tr>\r\n\t\t                <th>HSN/SAC</th>\r\n\t\t                <th>Taxable Amount</th>\r\n\t\t                <th>CGST</th>\r\n\t\t                <th>SGST</th>\r\n\t\t                <th>Total Tax Amount</th>\r\n\t\t            </tr>\r\n\t\t        </thead>\r\n\t\t        <tbody><tr><td>NA</td><td>109.09090909090908</td><td>5.45 (5%)</td><td>5.45 (5%)</td><td>10.9</td></tr><tr><td>ABC</td><td>58.18181818181818</td><td>2.91 (5%)</td><td>2.91 (5%)</td><td>5.82</td></tr><tr><td><strong>Total<strong></strong></strong></td><td>167.27272727272725</td><td>8.36</td><td>8.36</td><td>16.72</td></tr></tbody>\r\n\t\t    </table>\r\n\t\t</article>\r\n\t\t<aside>\r\n\t\t\t<h1><span contenteditable=\"\">Terms and Conditions</span></h1>\r\n\t\t\t<div contenteditable=\"\" id=\"terms\">\r\n\t\t\t\t<p>A finance charge of 1.5% will be made on unpaid balances after 30 days.</p>\r\n\t\t\t</div>\r\n\t\t</aside>\r\n\t</form>\r\n\t\r\n\r\n<script type=\"text/javascript\">\r\nlet button = document.getElementById(\"generate-pdf\");\r\nlet makepdf = document.getElementById(\"pdf-content\");\r\n\r\nbutton.addEventListener(\"click\", function () {\r\n  html2pdf()\r\n    .from(makepdf)\r\n    .set({\r\n      margin: [10, 0, 10, 0], // Set margins in millimeters (top, right, bottom, left)\r\n    })\r\n    .outputPdf('datauristring')\r\n    .then(function (pdfDataUri) {\r\n      // Open a new window with the PDF content\r\n      const newWindow = window.open('', '_blank');\r\n      newWindow.document.write('<embed width=\"100%\" height=\"100%\" src=\"' + pdfDataUri + '\">');\r\n      newWindow.document.close();\r\n    });\r\n});\r\nfunction saveInvoice(){\r\n\tdocument.getElementById(\"invoice_number_input\").value = document.getElementById(\"invoice_number\").innerHTML;\r\n\tdocument.getElementById(\"invoice_html_input\").value = document.documentElement.outerHTML;\r\n\tdocument.getElementById(\"save_invoice_form\").submit();\r\n}\r\n</script><div id=\"torrent-scanner-popup\" style=\"display: none;\"></div><webchatgpt-custom-element-3f766172-9747-45bc-8b4a-c9b50c760aac id=\"webchatgpt-snackbar\" style=\"color: rgb(255, 255, 255);\"></webchatgpt-custom-element-3f766172-9747-45bc-8b4a-c9b50c760aac></body><grammarly-desktop-integration data-grammarly-shadow-root=\"true\"></grammarly-desktop-integration></html>",
                    "invoice_class": "proforma-invoice"
                },
                {
                    "order_id": 21,
                    "data_id": 1,
                    "invoice_date": "2024-01-11",
                    "invoice_type": "intra-state",
                    "invoice_amount": 0.0,
                    "invoice_tax_amount": 0.0,
                    "id": 62,
                    "invoice_number": "PROFORMA/9",
                    "invoice_html": "\n<html>\n\t<head>\n\t\t<meta charset=\"utf-8\">\n\t\t<title>PROFORMA INVOICE</title>\n\t\t<link rel=\"stylesheet\" href=\"/static/invoices/invoice_style.css\">\n\t\t<link rel=\"license\" href=\"https://www.opensource.org/licenses/mit-license/\">\n\t\t\n\t\t<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.2/jspdf.min.js\"></script>\n\t\t<script src=\n\"https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.js\">\n\t    </script>\n\t</head>\n\t<body id=\"pdf-content\">\n\t<script>\n    function convertUnit(itemId, quantityElementids, unitElement, rateElementids=[]) {\n        var url = '/units_relation_api?item_ids[]=' + itemId;\n\n        fetch(url)\n            .then(function(response) {\n                return response.json();\n            })\n            .then(function(data) {\n                var unitList = data[itemId];\n                var currentUnit = unitElement.textContent;\n\n                length_unitList = Object.keys(unitList).length;\n                // console.log(length_unitList);\n                if (length_unitList === 1) {\n                    // Handle the case when there is only one unit defined\n                    console.log('Only one unit is defined for this item.');\n                    return;\n                }\n\n                var currentConversionFactor = 1;\n\n                // Find the current unit's conversion factor\n                if (unitList[currentUnit]) {\n                    currentConversionFactor = parseFloat(unitList[currentUnit]);\n                }\n\n                // Find the index of the current unit\n                var currentIndex = -1;\n                for (var i = 0; i < length_unitList; i++) {\n                    if (Object.keys(unitList)[i] === currentUnit) {\n                        currentIndex = i;\n                        break;\n                    }\n                }\n\n                // Cycle to the next unit\n                var nextUnitIndex = (currentIndex + 1) % length_unitList;\n                var nextUnit = Object.keys(unitList)[nextUnitIndex];\n                var nextConversionFactor = parseFloat(unitList[nextUnit]);\n                // Update the UI\n                unitElement.textContent = nextUnit;\n                unitElement.value = nextUnit;\n                for(var i = 0; i <quantityElementids.length; i++){\n\n                    quantityElement = document.getElementById(quantityElementids[i]);\n                    // Update the quantity by multiplying with the conversion factor\n                    var currentQuantity = parseFloat(quantityElement.textContent);\n                    var currentQuantityValue = parseFloat(quantityElement.value);\n                    var newQuantity = currentQuantity * (nextConversionFactor / currentConversionFactor);\n                    var newQuantityValue = currentQuantityValue * (nextConversionFactor / currentConversionFactor);\n\n                    \n                    quantityElement.textContent = newQuantity.toFixed(3);\n                    quantityElement.value = newQuantityValue.toFixed(3);\n                    quantityElement.setAttribute(\"data-parent\", newQuantityValue.toFixed(2))\n                    quantityElement.setAttribute(\"data-child\", newQuantityValue.toFixed(2))\n                }\n                for(var i = 0; i <rateElementids.length; i++){\n\n                    quantityElement = document.getElementById(rateElementids[i]);\n                    // Update the quantity by multiplying with the conversion factor\n                    var currentQuantity = parseFloat(quantityElement.textContent);\n                    var currentQuantityValue = parseFloat(quantityElement.value);\n                    var newQuantity = currentQuantity / (nextConversionFactor / currentConversionFactor);\n                    var newQuantityValue = currentQuantityValue / (nextConversionFactor / currentConversionFactor);\n\n                    \n                    quantityElement.textContent = newQuantity.toFixed(3);\n                    quantityElement.value = newQuantityValue.toFixed(3);\n                    quantityElement.setAttribute(\"data-parent\", newQuantityValue.toFixed(2))\n                    quantityElement.setAttribute(\"data-child\", newQuantityValue.toFixed(2))\n                }\n            })\n            .catch(function(error) {\n                console.error('Error fetching unit conversion data:', error);\n            });\n    }\n\n</script>\n\t<script>\n    function convertCurrencyToWords(price) {\n        console.log(price)\n  var sglDigit = [\"Zero\", \"One\", \"Two\", \"Three\", \"Four\", \"Five\", \"Six\", \"Seven\", \"Eight\", \"Nine\"],\n    dblDigit = [\"Ten\", \"Eleven\", \"Twelve\", \"Thirteen\", \"Fourteen\", \"Fifteen\", \"Sixteen\", \"Seventeen\", \"Eighteen\", \"Nineteen\"],\n    tensPlace = [\"\", \"Ten\", \"Twenty\", \"Thirty\", \"Forty\", \"Fifty\", \"Sixty\", \"Seventy\", \"Eighty\", \"Ninety\"],\n    handle_tens = function(dgt, prevDgt) {\n      return 0 == dgt ? \"\" : \" \" + (1 == dgt ? dblDigit[prevDgt] : tensPlace[dgt])\n    },\n    handle_utlc = function(dgt, nxtDgt, denom) {\n      return (0 != dgt && 1 != nxtDgt ? \" \" + sglDigit[dgt] : \"\") + (0 != nxtDgt || dgt > 0 ? \" \" + denom : \"\")\n    };\n\n  var str = \"\",\n    digitIdx = 0,\n    digit = 0,\n    nxtDigit = 0,\n    words = [];\n  if (price += \"\", isNaN(parseInt(price))) str = \"\";\n  else if (parseInt(price) > 0 && price.length <= 10) {\n    for (digitIdx = price.length - 1; digitIdx >= 0; digitIdx--) switch (digit = price[digitIdx] - 0, nxtDigit = digitIdx > 0 ? price[digitIdx - 1] - 0 : 0, price.length - digitIdx - 1) {\n      case 0:\n        words.push(handle_utlc(digit, nxtDigit, \"\"));\n        break;\n      case 1:\n        words.push(handle_tens(digit, price[digitIdx + 1]));\n        break;\n      case 2:\n        words.push(0 != digit ? \" \" + sglDigit[digit] + \" Hundred\" + (0 != price[digitIdx + 1] && 0 != price[digitIdx + 2] ? \" and\" : \"\") : \"\");\n        break;\n      case 3:\n        words.push(handle_utlc(digit, nxtDigit, \"Thousand\"));\n        break;\n      case 4:\n        words.push(handle_tens(digit, price[digitIdx + 1]));\n        break;\n      case 5:\n        words.push(handle_utlc(digit, nxtDigit, \"Lakh\"));\n        break;\n      case 6:\n        words.push(handle_tens(digit, price[digitIdx + 1]));\n        break;\n      case 7:\n        words.push(handle_utlc(digit, nxtDigit, \"Crore\"));\n        break;\n      case 8:\n        words.push(handle_tens(digit, price[digitIdx + 1]));\n        break;\n      case 9:\n        words.push(0 != digit ? \" \" + sglDigit[digit] + \" Hundred\" + (0 != price[digitIdx + 1] || 0 != price[digitIdx + 2] ? \" and\" : \" Crore\") : \"\")\n    }\n    str = words.reverse().join(\"\")\n  } else str = \"\";\n  return str\n\n}\n</script>\n\t<script src=\"/static/invoices/invoice_script.js\"></script>\n\t<form action=\"/save_invoice\" method=\"post\" id=\"save_invoice_form\">\n\t\t<input type=\"hidden\" name=\"invoice_id\" value=\"62\">\n\t\t<input type=\"hidden\" name=\"invoice_html\" id=\"invoice_html_input\" value=\"\">\n\t\t<input type=\"hidden\" name=\"invoice_number\" id=\"invoice_number_input\" value=\"\">\n\t    <div>\n\t\t    <button type=\"button\" onclick=\"saveInvoice()\">Save</button>    \t\n\t\t    <button type=\"button\" id=\"generate-pdf\" >Generate PDF</button>\n\t\t    <button type=\"button\" onclick=\"location.href='/invoices?order_id=21&action=generate&invoice_class=proforma-invoice&invoice_file=proforma_invoice&intra_state_gst_flag=YES'\">GENERATE NEW INTRA-STATE INVOICE</button>\n\t\t    <button type=\"button\" onclick=\"location.href='/invoices?order_id=21&action=generate&invoice_class=proforma-invoice&invoice_file=proforma_invoice&intra_state_gst_flag=NO'\">GENERATE NEW INTER-STATE INVOICE</button>\n\t\t    <span>\n\t\t    TAX-EXCLUSIVE RATES?\n\t\t    <input type=\"checkbox\" onclick=\"toggleTaxExclusive();\">\n\t\t    </span>\n\n\t    </div>\n\t\t<header>\n\t\t\t<h1>PROFORMA Invoice</h1>\n\t\t\t<address contenteditable id=\"company_details\">\n\t\t\t\t<p style=\"font-weight: bold\">VEDANT AGRAWAL_J3VU4NZYT5</p>\n\t\t\t\t<p></p>\n\t\t\t\t<p><strong>GSTIN:</strong></p>\n\t\t\t</address>\n\t\t\t<span><img alt=\"\" src=\"\"><input type=\"file\" accept=\"image/*\"></span>\n\t\t\t<table class=\"meta\">\n\t\t\t\t<tr>\n\t\t\t\t\t<th><span contenteditable>Invoice #</span></th>\n\t\t\t\t\t<td><span contenteditable id=\"invoice_number\">PROFORMA/9</span></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th><span contenteditable>Date</span></th>\n\t\t\t\t\t<td><span id=\"invoice_date\">2024-01-11</span></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th><span contenteditable>Currency</span></th>\n\t\t\t\t\t<td><span id=\"prefix\" contenteditable>₹</span><span id=\"\"></span></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</header>\n\t\t<article>\n\t\t\t\n\t\t\t<div>\n\t\t\t\t<address contenteditable id=\"billing_details\">\n\t\t\t\t\t<span style=\"font-weight: bold\">BILL TO: RAQGEN SOLUTIONS PRIVATE LIMITED</span>\n\t\t\t\t\t<p style=\"white-space: pre-wrap;\">10 / 20 , fateh kunj, Vidhyadhar Nagar</p>\n\t\t\t\t\t<p>GSTIN: </p>\n\t\t\t\t</address>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<address contenteditable id=\"shipping_details\">\n\t\t\t\t\t<span style=\"font-weight: bold\">SHIP TO: RAQGEN SOLUTIONS PRIVATE LIMITED</span>\n\t\t\t\t\t<p style=\"white-space: pre-wrap;\">10 / 20 , fateh kunj, Vidhyadhar Nagar</p>\n\t\t\t\t\t<p>GSTIN: </p>\n\t\t\t\t</address>\n\t\t\t</div>\n\t\t</article>\n\t\t<article>\n\t\t\t<table class=\"inventory\">\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th style=\"text-align: center; width: 6rem;\"><span contenteditable>Item</span></th>\n\t\t\t\t\t\t<th style=\"text-align: center; width: 1.4rem;\"><span contenteditable>HSN/SAC</span></th>\n\t\t\t\t\t\t<th style=\"text-align: center; width: 1.4rem;\"><span contenteditable>Quantity</span></th>\n\t\t\t\t\t\t<th style=\"text-align: center; width: 1.4rem;\"><span contenteditable>Unit</span></th>\n\t\t\t\t\t\t<th style=\"text-align: center; width: 1.4rem;\"><span contenteditable>Rate<br>(<span data-prefix>$</span>)</span></th>\n\t\t\t\t\t\t<th style=\"text-align: center; width: 1.4rem;\"><span contenteditable>Discount %</span></th>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<th style=\"text-align: center; width: 1.4rem;\"><span contenteditable>CGST<br>(<span data-prefix>$</span>)</span></th>\n\t\t\t\t\t\t<th style=\"text-align: center; width: 1.4rem;\"><span contenteditable>SGST<br>(<span data-prefix>$</span>)</span></th>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<th style=\"text-align: center; width: 1.4rem;\"><span contenteditable>Amount<br>(<span data-prefix>$</span>)</span></th>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t\t<!-- <a class=\"add\">+</a> -->\n\t\t\t<address contenteditable style=\"border-width: 0\" id=\"bank_details\">\n\t\t\t\t<p><strong>Total Quantities:</strong><strong id='total_in_qty' style=\"font-weight: bold\"></strong></p>\n\t\t\t\t<p><strong>Total Amount in Words:</strong><strong id='total_in_word' style=\"font-weight: bold\"></strong></p>\n\t\t\t\t<p>Bank Acc. Details:</p>\n\t\t\t</address>\n\t\t\t<table class=\"balance\">\n\t\t\t\t<tr>\n\t\t\t\t\t<th><span contenteditable >Sub Total<br><span class=\"inclusivity_text\">(tax inclusive)</span></th>\n\t\t\t\t\t<td><span data-prefix>$</span><span id=\"sub_total_amount\">600.00</span></td>\n\t\t\t\t</tr>\n\t\t\t\t\n\t\t\t\t<tr>\n\t\t\t\t\t<th><span contenteditable >Total CGST</span></th>\n\t\t\t\t\t<td><span data-prefix>$</span><span id=\"cgst_amount\">600.00</span></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th><span contenteditable >Total SGST</span></th>\n\t\t\t\t\t<td><span data-prefix>$</span><span id=\"sgst_amount\">600.00</span></td>\n\t\t\t\t</tr>\n\t\t\t\t\n\t\t\t\t<tr>\n\t\t\t\t\t<th><span contenteditable >Total Amount</span></th>\n\t\t\t\t\t<td><span data-prefix>$</span><span id=\"total_amount\">600.00</span></td>\n\t\t\t\t</tr>\n\n\t\t\t\t<tr hidden>\n\t\t\t\t\t<th><span contenteditable>Amount Paid</span></th>\n\t\t\t\t\t<td><span data-prefix>$</span><span contenteditable>0.00</span></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr hidden>\n\t\t\t\t\t<th><span contenteditable>Balance Due</span></th>\n\t\t\t\t\t<td><span data-prefix>$</span><span>600.00</span></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t\t<table id=\"categoryTotalsTable\">\n\t\t        <thead>\n\t\t            <tr>\n\t\t                <th>HSN/SAC</th>\n\t\t                <th>Taxable Amount</th>\n\t\t                \n\t\t                <th>CGST</th>\n\t\t                <th>SGST</th>\n\t\t                \n\t\t                <th>Total Tax Amount</th>\n\t\t            </tr>\n\t\t        </thead>\n\t\t        <tbody>\n\t\t            <!-- Category-wise totals will be displayed here using JavaScript -->\n\t\t        </tbody>\n\t\t    </table>\n\t\t</article>\n\t\t<aside>\n\t\t\t<h1><span contenteditable>Terms and Conditions</span></h1>\n\t\t\t<div contenteditable id=\"terms\">\n\t\t\t\t<p>A finance charge of 1.5% will be made on unpaid balances after 30 days.</p>\n\t\t\t</div>\n\t\t</aside>\n\t</form>\n\n\t<input type=\"hidden\" name=\"tax_exclusive_price_flag\" id=\"tax_exclusive_price_flag\" value='NO'>\n\t<input type=\"hidden\" name=\"intra_state_gst_flag\" id=\"intra_state_gst_flag\" value='YES'>\n\t</body>\n</html>\n<script type=\"text/javascript\">\nlet button = document.getElementById(\"generate-pdf\");\nlet makepdf = document.getElementById(\"pdf-content\");\n\nbutton.addEventListener(\"click\", function () {\n  html2pdf()\n    .from(makepdf)\n    .set({\n      margin: [10, 0, 10, 0], // Set margins in millimeters (top, right, bottom, left)\n    })\n    .outputPdf('datauristring')\n    .then(function (pdfDataUri) {\n      // Open a new window with the PDF content\n      const newWindow = window.open('', '_blank');\n      newWindow.document.write('<embed width=\"100%\" height=\"100%\" src=\"' + pdfDataUri + '\">');\n      newWindow.document.close();\n    });\n});\nfunction saveInvoice(){\n\tdocument.getElementById(\"invoice_number_input\").value = document.getElementById(\"invoice_number\").innerHTML;\n\tdocument.getElementById(\"invoice_html_input\").value = document.documentElement.outerHTML;\n\tdocument.getElementById(\"save_invoice_form\").submit();\n}\nfunction toggleTaxExclusive(){\n\tconsole.log(\"CHECKED!\");\n\tvalue_tax_element = document.getElementById(\"tax_exclusive_price_flag\");\n\tif(value_tax_element.value == 'YES'){\n\t\tvalue_tax_element.value = \"NO\";\n\t}\n\telse{\n\t\tvalue_tax_element.value = \"YES\";\n\t}\n\tupdateInvoice();\n}\n</script>",
                    "invoice_class": "proforma-invoice"
                },
                {
                    "order_id": 21,
                    "data_id": 1,
                    "invoice_date": "2024-01-11",
                    "invoice_type": "intra-state",
                    "invoice_amount": 0.0,
                    "invoice_tax_amount": 0.0,
                    "id": 63,
                    "invoice_number": "DELIVERY/8",
                    "invoice_html": "\n<html>\n\t<head>\n\t\t<meta charset=\"utf-8\">\n\t\t<title>DELIVERY CHALLAN</title>\n\t\t<link rel=\"stylesheet\" href=\"/static/invoices/invoice_style.css\">\n\t\t<link rel=\"license\" href=\"https://www.opensource.org/licenses/mit-license/\">\n\t\t<!-- <script src=\"/static/invoices/invoice_script.js\"></script> -->\n\t\t<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.2/jspdf.min.js\"></script>\n\t\t<script src=\n\"https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.js\">\n    </script>\n\t</head>\n\t<body id=\"pdf-content\">\n\t<script>\n    function convertUnit(itemId, quantityElementids, unitElement, rateElementids=[]) {\n        var url = '/units_relation_api?item_ids[]=' + itemId;\n\n        fetch(url)\n            .then(function(response) {\n                return response.json();\n            })\n            .then(function(data) {\n                var unitList = data[itemId];\n                var currentUnit = unitElement.textContent;\n\n                length_unitList = Object.keys(unitList).length;\n                // console.log(length_unitList);\n                if (length_unitList === 1) {\n                    // Handle the case when there is only one unit defined\n                    console.log('Only one unit is defined for this item.');\n                    return;\n                }\n\n                var currentConversionFactor = 1;\n\n                // Find the current unit's conversion factor\n                if (unitList[currentUnit]) {\n                    currentConversionFactor = parseFloat(unitList[currentUnit]);\n                }\n\n                // Find the index of the current unit\n                var currentIndex = -1;\n                for (var i = 0; i < length_unitList; i++) {\n                    if (Object.keys(unitList)[i] === currentUnit) {\n                        currentIndex = i;\n                        break;\n                    }\n                }\n\n                // Cycle to the next unit\n                var nextUnitIndex = (currentIndex + 1) % length_unitList;\n                var nextUnit = Object.keys(unitList)[nextUnitIndex];\n                var nextConversionFactor = parseFloat(unitList[nextUnit]);\n                // Update the UI\n                unitElement.textContent = nextUnit;\n                unitElement.value = nextUnit;\n                for(var i = 0; i <quantityElementids.length; i++){\n\n                    quantityElement = document.getElementById(quantityElementids[i]);\n                    // Update the quantity by multiplying with the conversion factor\n                    var currentQuantity = parseFloat(quantityElement.textContent);\n                    var currentQuantityValue = parseFloat(quantityElement.value);\n                    var newQuantity = currentQuantity * (nextConversionFactor / currentConversionFactor);\n                    var newQuantityValue = currentQuantityValue * (nextConversionFactor / currentConversionFactor);\n\n                    \n                    quantityElement.textContent = newQuantity.toFixed(3);\n                    quantityElement.value = newQuantityValue.toFixed(3);\n                    quantityElement.setAttribute(\"data-parent\", newQuantityValue.toFixed(2))\n                    quantityElement.setAttribute(\"data-child\", newQuantityValue.toFixed(2))\n                }\n                for(var i = 0; i <rateElementids.length; i++){\n\n                    quantityElement = document.getElementById(rateElementids[i]);\n                    // Update the quantity by multiplying with the conversion factor\n                    var currentQuantity = parseFloat(quantityElement.textContent);\n                    var currentQuantityValue = parseFloat(quantityElement.value);\n                    var newQuantity = currentQuantity / (nextConversionFactor / currentConversionFactor);\n                    var newQuantityValue = currentQuantityValue / (nextConversionFactor / currentConversionFactor);\n\n                    \n                    quantityElement.textContent = newQuantity.toFixed(3);\n                    quantityElement.value = newQuantityValue.toFixed(3);\n                    quantityElement.setAttribute(\"data-parent\", newQuantityValue.toFixed(2))\n                    quantityElement.setAttribute(\"data-child\", newQuantityValue.toFixed(2))\n                }\n            })\n            .catch(function(error) {\n                console.error('Error fetching unit conversion data:', error);\n            });\n    }\n\n</script>\n\t<form action=\"/save_invoice\" method=\"post\" id=\"save_invoice_form\">\n\t\t<input type=\"hidden\" name=\"invoice_id\" value=\"63\">\n\t\t<input type=\"hidden\" name=\"invoice_html\" id=\"invoice_html_input\" value=\"\">\n\t\t<input type=\"hidden\" name=\"invoice_number\" id=\"invoice_number_input\" value=\"\">\n\t    <div>\n\t\t    <button type=\"button\" onclick=\"saveInvoice()\">Save</button>    \t\n\t\t    <button type=\"button\" id=\"generate-pdf\" >Generate PDF</button>\n\t\t    <button type=\"button\" onclick=\"location.href='/invoices?order_id=21&action=generate&invoice_class=delivery-slip&invoice_file=delivery_slip'\">GENERATE NEW INVOICE</button>\n\t    </div>\n\t\t<header>\n\t\t\t<h1>DELIVERY CHALLAN</h1>\n\t\t\t<address contenteditable id=\"company_details\">\n\t\t\t\t<p style=\"font-weight: bold\">VEDANT AGRAWAL_J3VU4NZYT5</p>\n\t\t\t\t<p></p>\n\t\t\t\t<p><strong>GSTIN:</strong></p>\n\t\t\t</address>\n\t\t\t<span><img alt=\"\" src=\"\"><input type=\"file\" accept=\"image/*\"></span>\n\t\t\t<table class=\"meta\">\n\t\t\t\t<tr>\n\t\t\t\t\t<th><span contenteditable>Invoice #</span></th>\n\t\t\t\t\t<td><span contenteditable id=\"invoice_number\">DELIVERY/8</span></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th><span contenteditable>Date</span></th>\n\t\t\t\t\t<td><span id=\"invoice_date\">2024-01-11</span></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th><span contenteditable>Amount Due</span></th>\n\t\t\t\t\t<td><span id=\"prefix\" contenteditable>Rs.</span><span id=\"\">600.00</span></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</header>\n\t\t<article>\n\t\t\t\n\t\t\t<div>\n\t\t\t\t<address contenteditable id=\"billing_details\">\n\t\t\t\t\t<span style=\"font-weight: bold\">BILL TO: RAQGEN SOLUTIONS PRIVATE LIMITED</span>\n\t\t\t\t\t<p style=\"white-space: pre-wrap;\">10 / 20 , fateh kunj, Vidhyadhar Nagar</p>\n\t\t\t\t\t<p>GSTIN: </p>\n\t\t\t\t</address>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<address contenteditable id=\"shipping_details\">\n\t\t\t\t\t<span style=\"font-weight: bold\">SHIP TO: RAQGEN SOLUTIONS PRIVATE LIMITED</span>\n\t\t\t\t\t<p style=\"white-space: pre-wrap;\">10 / 20 , fateh kunj, Vidhyadhar Nagar</p>\n\t\t\t\t\t<p>GSTIN: </p>\n\t\t\t\t</address>\n\t\t\t</div>\n\t\t</article>\n\t\t<article>\n\t\t\t<table class=\"inventory\">\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th><span contenteditable>Item</span></th>\n\t\t\t\t\t\t<th><span contenteditable>HSN/SAC</span></th>\n\t\t\t\t\t\t<th><span contenteditable>Quantity</span></th>\n\t\t\t\t\t\t<th><span contenteditable>Unit</span></th>\n\t\t\t\t\t\t<!-- <th><span contenteditable>Rate</span></th>\n\t\t\t\t\t\t<th><span contenteditable>Discount %</span></th>\n\t\t\t\t\t\t<th><span contenteditable>CGST</span></th>\n\t\t\t\t\t\t<th><span contenteditable>SGST</span></th>\n\t\t\t\t\t\t<th><span contenteditable>Amount</span></th> -->\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t\t<!-- <a class=\"add\">+</a> -->\n\t\t\t<address contenteditable style=\"border-width: 0\" id=\"bank_details\" style=\"display: none;\">\n\t\t\t\t<p>Total in Words:</p>\n\t\t\t\t<p>Bank Acc. Details:</p>\n\n\t\t\t</address>\n\t\t\t<table class=\"balance\" style=\"display: none;\">\n\t\t\t\t<tr>\n\t\t\t\t\t<th><span contenteditable >Total</span></th>\n\t\t\t\t\t<td><span data-prefix>$</span><span id=\"total_amount\">600.00</span></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th><span contenteditable>Amount Paid</span></th>\n\t\t\t\t\t<td><span data-prefix>$</span><span contenteditable>0.00</span></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th><span contenteditable>Balance Due</span></th>\n\t\t\t\t\t<td><span data-prefix>$</span><span>600.00</span></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t\t<table id=\"categoryTotalsTable\" style=\"display: none;\">\n\t\t        <thead>\n\t\t            <tr>\n\t\t                <th>HSN/SAC</th>\n\t\t                <th>Taxable Amount</th>\n\t\t                <th>CGST</th>\n\t\t                <th>SGST</th>\n\t\t                <th>Total Tax Amount</th>\n\t\t            </tr>\n\t\t        </thead>\n\t\t        <tbody>\n\t\t            <!-- Category-wise totals will be displayed here using JavaScript -->\n\t\t        </tbody>\n\t\t    </table>\n\t\t</article>\n\t\t<aside>\n\t\t\t<h1><span contenteditable>Terms and Conditions</span></h1>\n\t\t\t<div contenteditable id=\"terms\">\n\t\t\t\t<p>A finance charge of 1.5% will be made on unpaid balances after 30 days.</p>\n\t\t\t</div>\n\t\t</aside>\n\t</form>\n\t</body>\n</html>\n<script type=\"text/javascript\">\nlet button = document.getElementById(\"generate-pdf\");\nlet makepdf = document.getElementById(\"pdf-content\");\n\nbutton.addEventListener(\"click\", function () {\n  html2pdf()\n    .from(makepdf)\n    .set({\n      margin: [10, 0, 10, 0], // Set margins in millimeters (top, right, bottom, left)\n    })\n    .outputPdf('datauristring')\n    .then(function (pdfDataUri) {\n      // Open a new window with the PDF content\n      const newWindow = window.open('', '_blank');\n      newWindow.document.write('<embed width=\"100%\" height=\"100%\" src=\"' + pdfDataUri + '\">');\n      newWindow.document.close();\n    });\n});\nfunction saveInvoice(){\n\tdocument.getElementById(\"invoice_number_input\").value = document.getElementById(\"invoice_number\").innerHTML;\n\tdocument.getElementById(\"invoice_html_input\").value = document.documentElement.outerHTML;\n\tdocument.getElementById(\"save_invoice_form\").submit();\n}\n</script>",
                    "invoice_class": "delivery-slip"
                },
                {
                    "order_id": 21,
                    "data_id": 1,
                    "invoice_date": "2023-11-25",
                    "invoice_type": "intra-state",
                    "invoice_amount": 0.0,
                    "invoice_tax_amount": 0.0,
                    "id": 39,
                    "invoice_number": "DELIVERY/GST/2",
                    "invoice_html": "<html><head>\r\n\t\t<meta charset=\"utf-8\">\r\n\t\t<title>PROFORMA INVOICE</title>\r\n\t\t<link rel=\"stylesheet\" href=\"/static/invoices/invoice_style.css\">\r\n\t\t<link rel=\"license\" href=\"https://www.opensource.org/licenses/mit-license/\">\r\n\t\t<!-- <script src=\"/static/invoices/invoice_script.js\"></script> -->\r\n\t\t<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.2/jspdf.min.js\"></script>\r\n\t\t<script src=\"https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.js\">\r\n    </script>\r\n\t</head>\r\n\t<body id=\"pdf-content\" data-new-gr-c-s-check-loaded=\"14.1141.0\" data-gr-ext-installed=\"\">\r\n\t<script>\r\n    function convertUnit(itemId, quantityElementids, unitElement, rateElementids=[]) {\r\n        var url = '/units_relation_api?item_ids[]=' + itemId;\r\n\r\n        fetch(url)\r\n            .then(function(response) {\r\n                return response.json();\r\n            })\r\n            .then(function(data) {\r\n                var unitList = data[itemId];\r\n                var currentUnit = unitElement.textContent;\r\n\r\n                length_unitList = Object.keys(unitList).length;\r\n                // console.log(length_unitList);\r\n                if (length_unitList === 1) {\r\n                    // Handle the case when there is only one unit defined\r\n                    console.log('Only one unit is defined for this item.');\r\n                    return;\r\n                }\r\n\r\n                var currentConversionFactor = 1;\r\n\r\n                // Find the current unit's conversion factor\r\n                if (unitList[currentUnit]) {\r\n                    currentConversionFactor = parseFloat(unitList[currentUnit]);\r\n                }\r\n\r\n                // Find the index of the current unit\r\n                var currentIndex = -1;\r\n                for (var i = 0; i < length_unitList; i++) {\r\n                    if (Object.keys(unitList)[i] === currentUnit) {\r\n                        currentIndex = i;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                // Cycle to the next unit\r\n                var nextUnitIndex = (currentIndex + 1) % length_unitList;\r\n                var nextUnit = Object.keys(unitList)[nextUnitIndex];\r\n                var nextConversionFactor = parseFloat(unitList[nextUnit]);\r\n                // Update the UI\r\n                unitElement.textContent = nextUnit;\r\n                unitElement.value = nextUnit;\r\n                for(var i = 0; i <quantityElementids.length; i++){\r\n\r\n                    quantityElement = document.getElementById(quantityElementids[i]);\r\n                    // Update the quantity by multiplying with the conversion factor\r\n                    var currentQuantity = parseFloat(quantityElement.textContent);\r\n                    var currentQuantityValue = parseFloat(quantityElement.value);\r\n                    var newQuantity = currentQuantity * (nextConversionFactor / currentConversionFactor);\r\n                    var newQuantityValue = currentQuantityValue * (nextConversionFactor / currentConversionFactor);\r\n\r\n                    \r\n                    quantityElement.textContent = newQuantity.toFixed(3);\r\n                    quantityElement.value = newQuantityValue.toFixed(3);\r\n                    quantityElement.setAttribute(\"data-parent\", newQuantityValue.toFixed(2))\r\n                    quantityElement.setAttribute(\"data-child\", newQuantityValue.toFixed(2))\r\n                }\r\n                for(var i = 0; i <rateElementids.length; i++){\r\n\r\n                    quantityElement = document.getElementById(rateElementids[i]);\r\n                    // Update the quantity by multiplying with the conversion factor\r\n                    var currentQuantity = parseFloat(quantityElement.textContent);\r\n                    var currentQuantityValue = parseFloat(quantityElement.value);\r\n                    var newQuantity = currentQuantity / (nextConversionFactor / currentConversionFactor);\r\n                    var newQuantityValue = currentQuantityValue / (nextConversionFactor / currentConversionFactor);\r\n\r\n                    \r\n                    quantityElement.textContent = newQuantity.toFixed(3);\r\n                    quantityElement.value = newQuantityValue.toFixed(3);\r\n                    quantityElement.setAttribute(\"data-parent\", newQuantityValue.toFixed(2))\r\n                    quantityElement.setAttribute(\"data-child\", newQuantityValue.toFixed(2))\r\n                }\r\n            })\r\n            .catch(function(error) {\r\n                console.error('Error fetching unit conversion data:', error);\r\n            });\r\n    }\r\n\r\n</script>\r\n\t<form action=\"/save_invoice\" method=\"post\" id=\"save_invoice_form\">\r\n\t\t<input type=\"hidden\" name=\"invoice_id\" value=\"39\">\r\n\t\t<input type=\"hidden\" name=\"invoice_html\" id=\"invoice_html_input\" value=\"\">\r\n\t\t<input type=\"hidden\" name=\"invoice_number\" id=\"invoice_number_input\" value=\"DELIVERY/GST/2\">\r\n\t    <div>\r\n\t\t    <button type=\"button\" onclick=\"saveInvoice()\">Save</button>    \t\r\n\t\t    <button type=\"button\" id=\"generate-pdf\">Generate PDF</button>\r\n\t\t    <button type=\"button\" onclick=\"location.href='/invoices?order_id=21&amp;action=generate&amp;invoice_class=delivery-slip&amp;invoice_file=delivery_slip'\">GENERATE NEW INVOICE</button>\r\n\t    </div>\r\n\t\t<header>\r\n\t\t\t<h1>PROFORMA Invoice</h1>\r\n\t\t\t<address contenteditable=\"\" id=\"company_details\">\r\n\t\t\t\t<p style=\"font-weight: bold\">Arotatvika</p>\r\n\t\t\t\t<p>B-9, Opp. Meera Hospital</p>\r\n\t\t\t\t<p>Shiv Marg, Bani Park</p>\r\n\t\t\t\t<p>Jaipur Rajasthan 302016</p>\r\n\t\t\t\t<p>India</p>\r\n\t\t\t\t<p>GSTIN: 08CSYPA3170K1ZA</p>\r\n\t\t\t</address>\r\n\t\t\t<span><img alt=\"\" src=\"\"><input type=\"file\" accept=\"image/*\"></span>\r\n\t\t\t<table class=\"meta\">\r\n\t\t\t\t<tbody><tr>\r\n\t\t\t\t\t<th><span contenteditable=\"\">Invoice #</span></th>\r\n\t\t\t\t\t<td><span contenteditable=\"\" id=\"invoice_number\">DELIVERY/GST/2</span></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th><span contenteditable=\"\">Date</span></th>\r\n\t\t\t\t\t<td><span id=\"invoice_date\">2023-11-25</span></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th><span contenteditable=\"\">Amount Due</span></th>\r\n\t\t\t\t\t<td><span id=\"prefix\" contenteditable=\"\">Rs.</span><span id=\"\">600.00</span></td>\r\n\t\t\t\t</tr>\r\n\t\t\t</tbody></table>\r\n\t\t</header>\r\n\t\t<article>\r\n\t\t\t\r\n\t\t\t<div>\r\n\t\t\t\t<address contenteditable=\"\" id=\"billing_details\">\r\n\t\t\t\t\t<span style=\"font-weight: bold\">BILL TO: RAQGEN SOLUTIONS PRIVATE LIMITED</span>\r\n\t\t\t\t\t<p style=\"white-space: pre-wrap;\">10 / 20 , fateh kunj, Vidhyadhar Nagar</p>\r\n\t\t\t\t\t<p>GSTIN: </p>\r\n\t\t\t\t</address>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<address contenteditable=\"\" id=\"shipping_details\">\r\n\t\t\t\t\t<span style=\"font-weight: bold\">SHIP TO: RAQGEN SOLUTIONS PRIVATE LIMITED</span>\r\n\t\t\t\t\t<p style=\"white-space: pre-wrap;\">10 / 20 , fateh kunj, Vidhyadhar Nagar</p>\r\n\t\t\t\t\t<p>GSTIN: </p>\r\n\t\t\t\t</address>\r\n\t\t\t</div>\r\n\t\t</article>\r\n\t\t<article>\r\n\t\t\t<table class=\"inventory\">\r\n\t\t\t\t<thead>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">Item</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">HSN/SAC</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">Quantity</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">Unit</span></th>\r\n\t\t\t\t\t\t<!-- <th><span contenteditable>Rate</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable>Discount %</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable>CGST</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable>SGST</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable>Amount</span></th> -->\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</thead>\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<td hidden=\"\" id=\"order_item_id_19\">19</td>\r\n\t\t\t\t\t\t<td><!-- <a class=\"cut\">- -->FG Item 1<br><span contenteditable=\"\"></span></td>\r\n\t\t\t\t\t\t<td><span contenteditable=\"\">ABC</span></td>\r\n\t\t\t\t\t\t<td><span contenteditable=\"\" id=\"order_item_qty_19\">14.0</span></td>\r\n\t\t\t\t\t\t<td><span id=\"order_item_unit_19\" onclick=\"convertUnit('2', ['order_item_qty_19'], this, ['order_item_sale_price_19'])\">dozens</span></td>\r\n\t\t\t\t\t\t<!-- <td><span data-prefix>$</span><span contenteditable id=\"order_item_sale_price_19\">4.0</span></td>\r\n\t\t\t\t\t\t<td><span contenteditable id=\"order_item_discount_percentage_19\">0.0</span></td>\r\n\t\t\t\t\t\t<td><span data-prefix></span><span id=\"cgst19\">0</span>(<span contenteditable>0.0</span>%)</td>\r\n\t\t\t\t\t\t<td><span data-prefix></span><span id=\"sgst19\">0</span>(<span contenteditable>0.0</span>%)</td>\r\n\t\t\t\t\t\t<td><span data-prefix>$</span><span></span></td> -->\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<td hidden=\"\" id=\"order_item_id_20\">20</td>\r\n\t\t\t\t\t\t<td><!-- <a class=\"cut\">- -->SF ITEM 1<br><span contenteditable=\"\"></span></td>\r\n\t\t\t\t\t\t<td><span contenteditable=\"\">NA</span></td>\r\n\t\t\t\t\t\t<td><span contenteditable=\"\" id=\"order_item_qty_20\">12.0</span></td>\r\n\t\t\t\t\t\t<td><span id=\"order_item_unit_20\" onclick=\"convertUnit('3', ['order_item_qty_20'], this, ['order_item_sale_price_20'])\">pcs</span></td>\r\n\t\t\t\t\t\t<!-- <td><span data-prefix>$</span><span contenteditable id=\"order_item_sale_price_20\">0.0</span></td>\r\n\t\t\t\t\t\t<td><span contenteditable id=\"order_item_discount_percentage_20\">0.0</span></td>\r\n\t\t\t\t\t\t<td><span data-prefix></span><span id=\"cgst20\">0</span>(<span contenteditable>0.0</span>%)</td>\r\n\t\t\t\t\t\t<td><span data-prefix></span><span id=\"sgst20\">0</span>(<span contenteditable>0.0</span>%)</td>\r\n\t\t\t\t\t\t<td><span data-prefix>$</span><span></span></td> -->\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\t\t\t<!-- <a class=\"add\">+</a> -->\r\n\t\t\t<address contenteditable=\"\" style=\"border-width: 0\" id=\"bank_details\">\r\n\t\t\t\t<p>Total in Words:</p>\r\n\t\t\t\t<p>Bank Acc. Details:</p>\r\n\r\n\t\t\t</address>\r\n\t\t\t<table class=\"balance\">\r\n\t\t\t\t<tbody><tr>\r\n\t\t\t\t\t<th><span contenteditable=\"\" id=\"total_amount\">Total</span></th>\r\n\t\t\t\t\t<td><span data-prefix=\"\">$</span><span>600.00</span></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th><span contenteditable=\"\">Amount Paid</span></th>\r\n\t\t\t\t\t<td><span data-prefix=\"\">$</span><span contenteditable=\"\">0.00</span></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th><span contenteditable=\"\">Balance Due</span></th>\r\n\t\t\t\t\t<td><span data-prefix=\"\">$</span><span>600.00</span></td>\r\n\t\t\t\t</tr>\r\n\t\t\t</tbody></table>\r\n\t\t\t<table id=\"categoryTotalsTable\">\r\n\t\t        <thead>\r\n\t\t            <tr>\r\n\t\t                <th>HSN/SAC</th>\r\n\t\t                <th>Taxable Amount</th>\r\n\t\t                <th>CGST</th>\r\n\t\t                <th>SGST</th>\r\n\t\t                <th>Total Tax Amount</th>\r\n\t\t            </tr>\r\n\t\t        </thead>\r\n\t\t        <tbody>\r\n\t\t            <!-- Category-wise totals will be displayed here using JavaScript -->\r\n\t\t        </tbody>\r\n\t\t    </table>\r\n\t\t</article>\r\n\t\t<aside>\r\n\t\t\t<h1><span contenteditable=\"\">Terms and Conditions</span></h1>\r\n\t\t\t<div contenteditable=\"\" id=\"terms\">\r\n\t\t\t\t<p>A finance charge of 1.5% will be made on unpaid balances after 30 days.</p>\r\n\t\t\t</div>\r\n\t\t</aside>\r\n\t</form>\r\n\t\r\n\r\n<script type=\"text/javascript\">\r\nlet button = document.getElementById(\"generate-pdf\");\r\nlet makepdf = document.getElementById(\"pdf-content\");\r\n\r\nbutton.addEventListener(\"click\", function () {\r\n  html2pdf()\r\n    .from(makepdf)\r\n    .set({\r\n      margin: [10, 0, 10, 0], // Set margins in millimeters (top, right, bottom, left)\r\n    })\r\n    .outputPdf('datauristring')\r\n    .then(function (pdfDataUri) {\r\n      // Open a new window with the PDF content\r\n      const newWindow = window.open('', '_blank');\r\n      newWindow.document.write('<embed width=\"100%\" height=\"100%\" src=\"' + pdfDataUri + '\">');\r\n      newWindow.document.close();\r\n    });\r\n});\r\nfunction saveInvoice(){\r\n\tdocument.getElementById(\"invoice_number_input\").value = document.getElementById(\"invoice_number\").innerHTML;\r\n\tdocument.getElementById(\"invoice_html_input\").value = document.documentElement.outerHTML;\r\n\tdocument.getElementById(\"save_invoice_form\").submit();\r\n}\r\n</script><div id=\"torrent-scanner-popup\" style=\"display: none;\"></div><webchatgpt-custom-element-886c9074-3c0b-443e-8b1b-b28417232ff8 id=\"webchatgpt-snackbar\" style=\"color: rgb(255, 255, 255);\"></webchatgpt-custom-element-886c9074-3c0b-443e-8b1b-b28417232ff8></body><grammarly-desktop-integration data-grammarly-shadow-root=\"true\"></grammarly-desktop-integration></html>",
                    "invoice_class": "delivery-slip"
                },
                {
                    "order_id": 21,
                    "data_id": 1,
                    "invoice_date": "2023-11-25",
                    "invoice_type": "intra-state",
                    "invoice_amount": 0.0,
                    "invoice_tax_amount": 0.0,
                    "id": 37,
                    "invoice_number": "SALES/5",
                    "invoice_html": "<html><head><style>article,aside,details,figcaption,figure,footer,header,hgroup,nav,section{display:block}audio[controls],canvas,video{display:inline-block}[hidden],audio{display:none}mark{background:#FF0;color:#000}</style><style>article,aside,details,figcaption,figure,footer,header,hgroup,nav,section{display:block}audio[controls],canvas,video{display:inline-block}[hidden],audio{display:none}mark{background:#FF0;color:#000}</style>\r\n\t\t<meta charset=\"utf-8\">\r\n\t\t<title>SALES INVOICE</title>\r\n\t\t<link rel=\"stylesheet\" href=\"/static/invoices/invoice_style.css\">\r\n\t\t<link rel=\"license\" href=\"https://www.opensource.org/licenses/mit-license/\">\r\n\t\t<script src=\"/static/invoices/invoice_script.js\"></script>\r\n\t\t<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.2/jspdf.min.js\"></script>\r\n\t\t<script src=\"https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.js\">\r\n    </script>\r\n\r\n\t</head>\r\n\t<body id=\"pdf-content\" data-new-gr-c-s-check-loaded=\"14.1141.0\" data-gr-ext-installed=\"\" data-new-gr-c-s-loaded=\"14.1141.0\">\r\n\t<script>\r\n    function convertUnit(itemId, quantityElementids, unitElement, rateElementids=[]) {\r\n        var url = '/units_relation_api?item_ids[]=' + itemId;\r\n\r\n        fetch(url)\r\n            .then(function(response) {\r\n                return response.json();\r\n            })\r\n            .then(function(data) {\r\n                var unitList = data[itemId];\r\n                var currentUnit = unitElement.textContent;\r\n\r\n                length_unitList = Object.keys(unitList).length;\r\n                // console.log(length_unitList);\r\n                if (length_unitList === 1) {\r\n                    // Handle the case when there is only one unit defined\r\n                    console.log('Only one unit is defined for this item.');\r\n                    return;\r\n                }\r\n\r\n                var currentConversionFactor = 1;\r\n\r\n                // Find the current unit's conversion factor\r\n                if (unitList[currentUnit]) {\r\n                    currentConversionFactor = parseFloat(unitList[currentUnit]);\r\n                }\r\n\r\n                // Find the index of the current unit\r\n                var currentIndex = -1;\r\n                for (var i = 0; i < length_unitList; i++) {\r\n                    if (Object.keys(unitList)[i] === currentUnit) {\r\n                        currentIndex = i;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                // Cycle to the next unit\r\n                var nextUnitIndex = (currentIndex + 1) % length_unitList;\r\n                var nextUnit = Object.keys(unitList)[nextUnitIndex];\r\n                var nextConversionFactor = parseFloat(unitList[nextUnit]);\r\n                // Update the UI\r\n                unitElement.textContent = nextUnit;\r\n                unitElement.value = nextUnit;\r\n                for(var i = 0; i <quantityElementids.length; i++){\r\n\r\n                    quantityElement = document.getElementById(quantityElementids[i]);\r\n                    // Update the quantity by multiplying with the conversion factor\r\n                    var currentQuantity = parseFloat(quantityElement.textContent);\r\n                    var currentQuantityValue = parseFloat(quantityElement.value);\r\n                    var newQuantity = currentQuantity * (nextConversionFactor / currentConversionFactor);\r\n                    var newQuantityValue = currentQuantityValue * (nextConversionFactor / currentConversionFactor);\r\n\r\n                    \r\n                    quantityElement.textContent = newQuantity.toFixed(3);\r\n                    quantityElement.value = newQuantityValue.toFixed(3);\r\n                    quantityElement.setAttribute(\"data-parent\", newQuantityValue.toFixed(2))\r\n                    quantityElement.setAttribute(\"data-child\", newQuantityValue.toFixed(2))\r\n                }\r\n                for(var i = 0; i <rateElementids.length; i++){\r\n\r\n                    quantityElement = document.getElementById(rateElementids[i]);\r\n                    // Update the quantity by multiplying with the conversion factor\r\n                    var currentQuantity = parseFloat(quantityElement.textContent);\r\n                    var currentQuantityValue = parseFloat(quantityElement.value);\r\n                    var newQuantity = currentQuantity / (nextConversionFactor / currentConversionFactor);\r\n                    var newQuantityValue = currentQuantityValue / (nextConversionFactor / currentConversionFactor);\r\n\r\n                    \r\n                    quantityElement.textContent = newQuantity.toFixed(3);\r\n                    quantityElement.value = newQuantityValue.toFixed(3);\r\n                    quantityElement.setAttribute(\"data-parent\", newQuantityValue.toFixed(2))\r\n                    quantityElement.setAttribute(\"data-child\", newQuantityValue.toFixed(2))\r\n                }\r\n            })\r\n            .catch(function(error) {\r\n                console.error('Error fetching unit conversion data:', error);\r\n            });\r\n    }\r\n\r\n</script>\r\n\t<form action=\"/save_invoice\" method=\"post\" id=\"save_invoice_form\">\r\n\t\t<input type=\"hidden\" name=\"invoice_id\" value=\"37\">\r\n\t\t<input type=\"hidden\" name=\"invoice_html\" id=\"invoice_html_input\" value=\"\">\r\n\t\t<input type=\"hidden\" name=\"invoice_number\" id=\"invoice_number_input\" value=\"SALES/5\">\r\n\t    <div>\r\n\t\t    <button type=\"button\" onclick=\"saveInvoice()\">Save</button>    \t\r\n\t\t    <button type=\"button\" id=\"generate-pdf\">Generate PDF</button>\r\n\t\t    <button type=\"button\" onclick=\"location.href='/invoices?order_id=21&amp;action=generate&amp;invoice_class=sales-invoice&amp;invoice_file=sales_invoice'\">GENERATE NEW INVOICE</button>\r\n\t    </div>\r\n\t\t<header>\r\n\t\t\t<h1>SALES INVOICE</h1>\r\n\t\t\t<address contenteditable=\"\" id=\"company_details\">\r\n\t\t\t\t<p style=\"font-weight: bold\">Arotatvika</p>\r\n\t\t\t\t<p>B-9, Opp. Meera Hospital</p>\r\n\t\t\t\t<p>Shiv Marg, Bani Park</p>\r\n\t\t\t\t<p>Jaipur Rajasthan 302016</p>\r\n\t\t\t\t<p>India</p>\r\n\t\t\t\t<p>GSTIN: 08CSYPA3170K1ZA</p>\r\n\t\t\t</address>\r\n\t\t\t<span><img alt=\"\" src=\"\"><input type=\"file\" accept=\"image/*\"></span>\r\n\t\t\t<table class=\"meta\">\r\n\t\t\t\t<tbody><tr>\r\n\t\t\t\t\t<th><span contenteditable=\"\">Invoice #</span></th>\r\n\t\t\t\t\t<td><span contenteditable=\"\" id=\"invoice_number\">SALES/5</span></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th><span contenteditable=\"\">Date</span></th>\r\n\t\t\t\t\t<td><span id=\"invoice_date\">2023-11-25</span></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th><span contenteditable=\"\">Amount Due</span></th>\r\n\t\t\t\t\t<td><span id=\"prefix\" contenteditable=\"\">Rs.</span><span id=\"\">175.44</span></td>\r\n\t\t\t\t</tr>\r\n\t\t\t</tbody></table>\r\n\t\t</header>\r\n\t\t<article>\r\n\t\t\t\r\n\t\t\t<div>\r\n\t\t\t\t<address contenteditable=\"\" id=\"billing_details\">\r\n\t\t\t\t\t<span style=\"font-weight: bold\">BILL TO: RAQGEN SOLUTIONS PRIVATE LIMITED</span>\r\n\t\t\t\t\t<p style=\"white-space: pre-wrap;\">10 / 20 , fateh kunj, Vidhyadhar Nagar</p>\r\n\t\t\t\t\t<p>GSTIN: </p>\r\n\t\t\t\t</address>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<address contenteditable=\"\" id=\"shipping_details\">\r\n\t\t\t\t\t<span style=\"font-weight: bold\">SHIP TO: RAQGEN SOLUTIONS PRIVATE LIMITED</span>\r\n\t\t\t\t\t<p style=\"white-space: pre-wrap;\">10 / 20 , fateh kunj, Vidhyadhar Nagar</p>\r\n\t\t\t\t\t<p>GSTIN: </p>\r\n\t\t\t\t</address>\r\n\t\t\t</div>\r\n\t\t</article>\r\n\t\t<article>\r\n\t\t\t<table class=\"inventory\">\r\n\t\t\t\t<thead>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">Item</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">HSN/SAC</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">Quantity</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">Unit</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">Rate</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">Discount %</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">CGST</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">SGST</span></th>\r\n\t\t\t\t\t\t<th><span contenteditable=\"\">Amount</span></th>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</thead>\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<td hidden=\"\" id=\"order_item_id_20\">20</td>\r\n\t\t\t\t\t\t<td><!-- <a class=\"cut\">- -->SF ITEM 1<br><span contenteditable=\"\"></span></td>\r\n\t\t\t\t\t\t<td><span contenteditable=\"\">NA</span></td>\r\n\t\t\t\t\t\t<td><span id=\"order_item_qty_20\">12.0</span></td>\r\n\t\t\t\t\t\t<td><span id=\"order_item_unit_20\" onclick=\"convertUnit('3', ['order_item_qty_20'], this, ['order_item_sale_price_20'])\">pcs</span></td>\r\n\t\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span id=\"order_item_sale_price_20\">10.0</span></td>\r\n\t\t\t\t\t\t<td><span id=\"order_item_discount_percentage_20\">0.0</span></td>\r\n\t\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span id=\"cgst20\">0.00</span> ( <span>0.0</span>% )</td>\r\n\t\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span id=\"sgst20\">0.00</span> ( <span>0.0</span>% )</td>\r\n\t\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span>120</span></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<td hidden=\"\" id=\"order_item_id_19\">19</td>\r\n\t\t\t\t\t\t<td><!-- <a class=\"cut\">- -->FG Item 1<br><span contenteditable=\"\">(carton&nbsp; of 25dz)</span></td>\r\n\t\t\t\t\t\t<td><span contenteditable=\"\">ABC</span></td>\r\n\t\t\t\t\t\t<td><span id=\"order_item_qty_19\" data-parent=\"NaN\" data-child=\"NaN\">168.000</span></td>\r\n\t\t\t\t\t\t<td><span id=\"order_item_unit_19\" onclick=\"convertUnit('2', ['order_item_qty_19'], this, ['order_item_sale_price_19'])\">pcs</span></td>\r\n\t\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span id=\"order_item_sale_price_19\" data-parent=\"NaN\" data-child=\"NaN\">0.333</span></td>\r\n\t\t\t\t\t\t<td><span id=\"order_item_discount_percentage_19\">0.0</span></td>\r\n\t\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span id=\"cgst19\">0.00</span> ( <span>0.0</span>% )</td>\r\n\t\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span id=\"sgst19\">0.00</span> ( <span>0.0</span>% )</td>\r\n\t\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span>55.44</span></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\t\t\t<!-- <a class=\"add\">+</a> -->\r\n\t\t\t<address contenteditable=\"\" style=\"border-width: 0\" id=\"bank_details\">\r\n\t\t\t\t<p>Total in Words:</p>\r\n\t\t\t\t<p>Bank Acc. Details:</p>\r\n\r\n\t\t\t</address>\r\n\t\t\t<table class=\"balance\">\r\n\t\t\t\t<tbody><tr>\r\n\t\t\t\t\t<th><span contenteditable=\"\" id=\"total_amount\">Total</span></th>\r\n\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span>175.44</span></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th><span contenteditable=\"\">Amount Paid</span></th>\r\n\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span contenteditable=\"\">0.00</span></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th><span contenteditable=\"\">Balance Due</span></th>\r\n\t\t\t\t\t<td><span data-prefix=\"\">Rs.</span><span>175.44</span></td>\r\n\t\t\t\t</tr>\r\n\t\t\t</tbody></table>\r\n\t\t\t<table id=\"categoryTotalsTable\">\r\n\t\t        <thead>\r\n\t\t            <tr>\r\n\t\t                <th>HSN/SAC</th>\r\n\t\t                <th>Taxable Amount</th>\r\n\t\t                <th>CGST</th>\r\n\t\t                <th>SGST</th>\r\n\t\t                <th>Total Tax Amount</th>\r\n\t\t            </tr>\r\n\t\t        </thead>\r\n\t\t        <tbody><tr><td>NA</td><td>120</td><td>0 (0%)</td><td>0 (0%)</td><td>0</td></tr><tr><td>ABC</td><td>55.44</td><td>0 (0%)</td><td>0 (0%)</td><td>0</td></tr><tr><td><strong>Total<strong></strong></strong></td><td>175.44</td><td>0</td><td>0</td><td>0</td></tr></tbody>\r\n\t\t    </table>\r\n\t\t</article>\r\n\t\t<aside>\r\n\t\t\t<h1><span contenteditable=\"\">Terms and Conditions</span></h1>\r\n\t\t\t<div contenteditable=\"\" id=\"terms\">\r\n\t\t\t\t<p>A finance charge of 1.5% will be made on unpaid balances after 30 days.</p>\r\n\t\t\t</div>\r\n\t\t</aside>\r\n\t</form>\r\n\t\r\n\r\n<script type=\"text/javascript\">\r\nlet button = document.getElementById(\"generate-pdf\");\r\nlet makepdf = document.getElementById(\"pdf-content\");\r\n\r\nbutton.addEventListener(\"click\", function () {\r\n  html2pdf()\r\n    .from(makepdf)\r\n    .set({\r\n      margin: [10, 0, 10, 0], // Set margins in millimeters (top, right, bottom, left)\r\n    })\r\n    .outputPdf('datauristring')\r\n    .then(function (pdfDataUri) {\r\n      // Open a new window with the PDF content\r\n      const newWindow = window.open('', '_blank');\r\n      newWindow.document.write('<embed width=\"100%\" height=\"100%\" src=\"' + pdfDataUri + '\">');\r\n      newWindow.document.close();\r\n    });\r\n});\r\nfunction saveInvoice(){\r\n\tdocument.getElementById(\"invoice_number_input\").value = document.getElementById(\"invoice_number\").innerHTML;\r\n\tdocument.getElementById(\"invoice_html_input\").value = document.documentElement.outerHTML;\r\n\tdocument.getElementById(\"save_invoice_form\").submit();\r\n}\r\n</script><div id=\"torrent-scanner-popup\" style=\"display: none;\"></div><webchatgpt-custom-element-19f0908e-22ff-4611-bcbc-7969f2b1b87b id=\"webchatgpt-snackbar\" style=\"color: rgb(255, 255, 255);\"></webchatgpt-custom-element-19f0908e-22ff-4611-bcbc-7969f2b1b87b><grammarly-desktop-integration data-grammarly-shadow-root=\"true\"></grammarly-desktop-integration><div id=\"torrent-scanner-popup\" style=\"display: none;\"></div><webchatgpt-custom-element-48dc6d36-e807-4250-a73b-f5d0646a844f id=\"webchatgpt-snackbar\" style=\"color: rgb(255, 255, 255);\"></webchatgpt-custom-element-48dc6d36-e807-4250-a73b-f5d0646a844f></body></html>",
                    "invoice_class": "sales-invoice"
                },
                {
                    "order_id": 21,
                    "data_id": 1,
                    "invoice_date": "2023-11-30",
                    "invoice_type": "intra-state",
                    "invoice_amount": 0.0,
                    "invoice_tax_amount": 0.0,
                    "id": 197,
                    "invoice_number": "DELIVERY/29",
                    "invoice_html": "",
                    "invoice_class": "delivery-slip"
                }
            ]
        },
        "order_items": [
            {
                "id": 19,
                "item_unit": "dozens",
                "dispatch_qty": 11.0,
                "inventory_ledger_id": 31,
                "item_id": 2,
                "order_id": 21,
                "order_qty": 16.0,
                "data_id": 1
            },
            {
                "id": 20,
                "item_unit": "pcs",
                "dispatch_qty": 15.0,
                "inventory_ledger_id": 32,
                "item_id": 3,
                "order_id": 21,
                "order_qty": 12.0,
                "data_id": 1
            },
            {
                "id": 47,
                "item_unit": "dozens",
                "dispatch_qty": 0.0,
                "inventory_ledger_id": 67,
                "item_id": 2,
                "order_id": 21,
                "order_qty": 5.0,
                "data_id": 1
            }
        ]
    },
    "TODAY": "2024-06-24",
    "INVENTORY_DATA": {
        "2": {
            "Item Name": "FG Item 1 bs",
            "Item Unit": "dozend",
            "total_stock": 55.0
        },
        "3": {
            "Item Name": "Sabka Product",
            "Item Unit": "pcs",
            "total_stock": 9158.0
        }
    }
}